{"ast":null,"code":"import { useState, useEffect } from 'react';\n/**\r\n * Fetch and load an image for programatic use such as in a `<canvas>` element.\r\n *\r\n * @param imageOrUrl The `HtmlImageElement` or image url to load\r\n * @param crossOrigin The `crossorigin` attribute to set\r\n *\r\n * ```ts\r\n * const { image, error } = useImage('/static/kittens.png')\r\n * const ref = useRef<HTMLCanvasElement>()\r\n *\r\n * useEffect(() => {\r\n *   const ctx = ref.current.getContext('2d')\r\n *\r\n *   if (image) {\r\n *     ctx.drawImage(image, 0, 0)\r\n *   }\r\n * }, [ref, image])\r\n *\r\n * return (\r\n *   <>\r\n *     {error && \"there was a problem loading the image\"}\r\n *     <canvas ref={ref} />\r\n *   </>\r\n * ```\r\n */\n\nexport default function useImage(imageOrUrl, crossOrigin) {\n  var _useState = useState({\n    image: null,\n    error: null\n  }),\n      state = _useState[0],\n      setState = _useState[1];\n\n  useEffect(function () {\n    if (!imageOrUrl) return undefined;\n    var image;\n\n    if (typeof imageOrUrl === 'string') {\n      image = new Image();\n      if (crossOrigin) image.crossOrigin = crossOrigin;\n      image.src = imageOrUrl;\n    } else {\n      image = imageOrUrl;\n\n      if (image.complete && image.naturalHeight > 0) {\n        setState({\n          image: image,\n          error: null\n        });\n        return;\n      }\n    }\n\n    function onLoad() {\n      setState({\n        image: image,\n        error: null\n      });\n    }\n\n    function onError(error) {\n      setState({\n        image: image,\n        error: error\n      });\n    }\n\n    image.addEventListener('load', onLoad);\n    image.addEventListener('error', onError);\n    return function () {\n      image.removeEventListener('load', onLoad);\n      image.removeEventListener('error', onError);\n    };\n  }, [imageOrUrl, crossOrigin]);\n  return state;\n}","map":{"version":3,"sources":["C:/Users/bhupe/Downloads/Term 4/COMP4537/MilestoneFinal/ISAproject/node_modules/@restart/hooks/esm/useImage.js"],"names":["useState","useEffect","useImage","imageOrUrl","crossOrigin","_useState","image","error","state","setState","undefined","Image","src","complete","naturalHeight","onLoad","onError","addEventListener","removeEventListener"],"mappings":"AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,eAAe,SAASC,QAAT,CAAkBC,UAAlB,EAA8BC,WAA9B,EAA2C;AACxD,MAAIC,SAAS,GAAGL,QAAQ,CAAC;AACvBM,IAAAA,KAAK,EAAE,IADgB;AAEvBC,IAAAA,KAAK,EAAE;AAFgB,GAAD,CAAxB;AAAA,MAIIC,KAAK,GAAGH,SAAS,CAAC,CAAD,CAJrB;AAAA,MAKII,QAAQ,GAAGJ,SAAS,CAAC,CAAD,CALxB;;AAOAJ,EAAAA,SAAS,CAAC,YAAY;AACpB,QAAI,CAACE,UAAL,EAAiB,OAAOO,SAAP;AACjB,QAAIJ,KAAJ;;AAEA,QAAI,OAAOH,UAAP,KAAsB,QAA1B,EAAoC;AAClCG,MAAAA,KAAK,GAAG,IAAIK,KAAJ,EAAR;AACA,UAAIP,WAAJ,EAAiBE,KAAK,CAACF,WAAN,GAAoBA,WAApB;AACjBE,MAAAA,KAAK,CAACM,GAAN,GAAYT,UAAZ;AACD,KAJD,MAIO;AACLG,MAAAA,KAAK,GAAGH,UAAR;;AAEA,UAAIG,KAAK,CAACO,QAAN,IAAkBP,KAAK,CAACQ,aAAN,GAAsB,CAA5C,EAA+C;AAC7CL,QAAAA,QAAQ,CAAC;AACPH,UAAAA,KAAK,EAAEA,KADA;AAEPC,UAAAA,KAAK,EAAE;AAFA,SAAD,CAAR;AAIA;AACD;AACF;;AAED,aAASQ,MAAT,GAAkB;AAChBN,MAAAA,QAAQ,CAAC;AACPH,QAAAA,KAAK,EAAEA,KADA;AAEPC,QAAAA,KAAK,EAAE;AAFA,OAAD,CAAR;AAID;;AAED,aAASS,OAAT,CAAiBT,KAAjB,EAAwB;AACtBE,MAAAA,QAAQ,CAAC;AACPH,QAAAA,KAAK,EAAEA,KADA;AAEPC,QAAAA,KAAK,EAAEA;AAFA,OAAD,CAAR;AAID;;AAEDD,IAAAA,KAAK,CAACW,gBAAN,CAAuB,MAAvB,EAA+BF,MAA/B;AACAT,IAAAA,KAAK,CAACW,gBAAN,CAAuB,OAAvB,EAAgCD,OAAhC;AACA,WAAO,YAAY;AACjBV,MAAAA,KAAK,CAACY,mBAAN,CAA0B,MAA1B,EAAkCH,MAAlC;AACAT,MAAAA,KAAK,CAACY,mBAAN,CAA0B,OAA1B,EAAmCF,OAAnC;AACD,KAHD;AAID,GAxCQ,EAwCN,CAACb,UAAD,EAAaC,WAAb,CAxCM,CAAT;AAyCA,SAAOI,KAAP;AACD","sourcesContent":["import { useState, useEffect } from 'react';\r\n\r\n/**\r\n * Fetch and load an image for programatic use such as in a `<canvas>` element.\r\n *\r\n * @param imageOrUrl The `HtmlImageElement` or image url to load\r\n * @param crossOrigin The `crossorigin` attribute to set\r\n *\r\n * ```ts\r\n * const { image, error } = useImage('/static/kittens.png')\r\n * const ref = useRef<HTMLCanvasElement>()\r\n *\r\n * useEffect(() => {\r\n *   const ctx = ref.current.getContext('2d')\r\n *\r\n *   if (image) {\r\n *     ctx.drawImage(image, 0, 0)\r\n *   }\r\n * }, [ref, image])\r\n *\r\n * return (\r\n *   <>\r\n *     {error && \"there was a problem loading the image\"}\r\n *     <canvas ref={ref} />\r\n *   </>\r\n * ```\r\n */\r\nexport default function useImage(imageOrUrl, crossOrigin) {\r\n  var _useState = useState({\r\n    image: null,\r\n    error: null\r\n  }),\r\n      state = _useState[0],\r\n      setState = _useState[1];\r\n\r\n  useEffect(function () {\r\n    if (!imageOrUrl) return undefined;\r\n    var image;\r\n\r\n    if (typeof imageOrUrl === 'string') {\r\n      image = new Image();\r\n      if (crossOrigin) image.crossOrigin = crossOrigin;\r\n      image.src = imageOrUrl;\r\n    } else {\r\n      image = imageOrUrl;\r\n\r\n      if (image.complete && image.naturalHeight > 0) {\r\n        setState({\r\n          image: image,\r\n          error: null\r\n        });\r\n        return;\r\n      }\r\n    }\r\n\r\n    function onLoad() {\r\n      setState({\r\n        image: image,\r\n        error: null\r\n      });\r\n    }\r\n\r\n    function onError(error) {\r\n      setState({\r\n        image: image,\r\n        error: error\r\n      });\r\n    }\r\n\r\n    image.addEventListener('load', onLoad);\r\n    image.addEventListener('error', onError);\r\n    return function () {\r\n      image.removeEventListener('load', onLoad);\r\n      image.removeEventListener('error', onError);\r\n    };\r\n  }, [imageOrUrl, crossOrigin]);\r\n  return state;\r\n}"]},"metadata":{},"sourceType":"module"}