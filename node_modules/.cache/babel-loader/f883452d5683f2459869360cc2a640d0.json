{"ast":null,"code":"import firebase from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport { Component } from '@firebase/component';\nimport { isBrowserExtension, isReactNative, isNode, getUA, isIE, isIndexedDBAvailable, FirebaseError } from '@firebase/util';\nvar name = \"@firebase/auth-compat\";\nvar version = \"0.2.9\";\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\n\nfunction _getCurrentScheme() {\n  var _a;\n\n  return ((_a = self === null || self === void 0 ? void 0 : self.location) === null || _a === void 0 ? void 0 : _a.protocol) || null;\n}\n/**\r\n * @return {boolean} Whether the current environment is http or https.\r\n */\n\n\nfunction _isHttpOrHttps() {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n/**\r\n * @param {?string=} ua The user agent.\r\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\r\n *     Cordova environment.\r\n */\n\n\nfunction _isAndroidOrIosCordovaScheme() {\n  let ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getUA();\n  return !!((_getCurrentScheme() === 'file:' || _getCurrentScheme() === 'ionic:') && ua.toLowerCase().match(/iphone|ipad|ipod|android/));\n}\n/**\r\n * @return {boolean} Whether the environment is a native environment, where\r\n *     CORS checks do not apply.\r\n */\n\n\nfunction _isNativeEnvironment() {\n  return isReactNative() || isNode();\n}\n/**\r\n * Checks whether the user agent is IE11.\r\n * @return {boolean} True if it is IE11.\r\n */\n\n\nfunction _isIe11() {\n  return isIE() && (document === null || document === void 0 ? void 0 : document.documentMode) === 11;\n}\n/**\r\n * Checks whether the user agent is Edge.\r\n * @param {string} userAgent The browser user agent string.\r\n * @return {boolean} True if it is Edge.\r\n */\n\n\nfunction _isEdge() {\n  let ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getUA();\n  return /Edge\\/\\d+/.test(ua);\n}\n/**\r\n * @param {?string=} opt_userAgent The navigator user agent.\r\n * @return {boolean} Whether local storage is not synchronized between an iframe\r\n *     and a popup of the same domain.\r\n */\n\n\nfunction _isLocalStorageNotSynchronized() {\n  let ua = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getUA();\n  return _isIe11() || _isEdge(ua);\n}\n/** @return {boolean} Whether web storage is supported. */\n\n\nfunction _isWebStorageSupported() {\n  try {\n    const storage = self.localStorage;\n\n    const key = exp._generateEventId();\n\n    if (storage) {\n      // setItem will throw an exception if we cannot access WebStorage (e.g.,\n      // Safari in private mode).\n      storage['setItem'](key, '1');\n      storage['removeItem'](key); // For browsers where iframe web storage does not synchronize with a popup\n      // of the same domain, indexedDB is used for persistent storage. These\n      // browsers include IE11 and Edge.\n      // Make sure it is supported (IE11 and Edge private mode does not support\n      // that).\n\n      if (_isLocalStorageNotSynchronized()) {\n        // In such browsers, if indexedDB is not supported, an iframe cannot be\n        // notified of the popup sign in result.\n        return isIndexedDBAvailable();\n      }\n\n      return true;\n    }\n  } catch (e) {\n    // localStorage is not available from a worker. Test availability of\n    // indexedDB.\n    return _isWorker() && isIndexedDBAvailable();\n  }\n\n  return false;\n}\n/**\r\n * @param {?Object=} global The optional global scope.\r\n * @return {boolean} Whether current environment is a worker.\r\n */\n\n\nfunction _isWorker() {\n  // WorkerGlobalScope only defined in worker environment.\n  return typeof global !== 'undefined' && 'WorkerGlobalScope' in global && 'importScripts' in global;\n}\n\nfunction _isPopupRedirectSupported() {\n  return (_isHttpOrHttps() || isBrowserExtension() || _isAndroidOrIosCordovaScheme()) && // React Native with remote debugging reports its location.protocol as\n  // http.\n  !_isNativeEnvironment() && // Local storage has to be supported for browser popup and redirect\n  // operations to work.\n  _isWebStorageSupported() && // DOM, popups and redirects are not supported within a worker.\n  !_isWorker();\n}\n/** Quick check that indicates the platform *may* be Cordova */\n\n\nfunction _isLikelyCordova() {\n  return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\n}\n\nasync function _isCordova() {\n  if (!_isLikelyCordova()) {\n    return false;\n  }\n\n  return new Promise(resolve => {\n    const timeoutId = setTimeout(() => {\n      // We've waited long enough; the telltale Cordova event didn't happen\n      resolve(false);\n    }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\n    document.addEventListener('deviceready', () => {\n      clearTimeout(timeoutId);\n      resolve(true);\n    });\n  });\n}\n\nfunction _getSelfWindow() {\n  return typeof window !== 'undefined' ? window : null;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst Persistence = {\n  LOCAL: 'local',\n  NONE: 'none',\n  SESSION: 'session'\n};\nconst _assert$3 = exp._assert;\nconst PERSISTENCE_KEY = 'persistence';\n/**\r\n * Validates that an argument is a valid persistence value. If an invalid type\r\n * is specified, an error is thrown synchronously.\r\n */\n\nfunction _validatePersistenceArgument(auth, persistence) {\n  _assert$3(Object.values(Persistence).includes(persistence), auth, \"invalid-persistence-type\"\n  /* INVALID_PERSISTENCE */\n  ); // Validate if the specified type is supported in the current environment.\n\n\n  if (isReactNative()) {\n    // This is only supported in a browser.\n    _assert$3(persistence !== Persistence.SESSION, auth, \"unsupported-persistence-type\"\n    /* UNSUPPORTED_PERSISTENCE */\n    );\n\n    return;\n  }\n\n  if (isNode()) {\n    // Only none is supported in Node.js.\n    _assert$3(persistence === Persistence.NONE, auth, \"unsupported-persistence-type\"\n    /* UNSUPPORTED_PERSISTENCE */\n    );\n\n    return;\n  }\n\n  if (_isWorker()) {\n    // In a worker environment, either LOCAL or NONE are supported.\n    // If indexedDB not supported and LOCAL provided, throw an error\n    _assert$3(persistence === Persistence.NONE || persistence === Persistence.LOCAL && isIndexedDBAvailable(), auth, \"unsupported-persistence-type\"\n    /* UNSUPPORTED_PERSISTENCE */\n    );\n\n    return;\n  } // This is restricted by what the browser supports.\n\n\n  _assert$3(persistence === Persistence.NONE || _isWebStorageSupported(), auth, \"unsupported-persistence-type\"\n  /* UNSUPPORTED_PERSISTENCE */\n  );\n}\n\nasync function _savePersistenceForRedirect(auth) {\n  await auth._initializationPromise;\n  const session = getSessionStorageIfAvailable();\n\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, auth.config.apiKey, auth.name);\n\n  if (session) {\n    session.setItem(key, auth._getPersistence());\n  }\n}\n\nfunction _getPersistencesFromRedirect(apiKey, appName) {\n  const session = getSessionStorageIfAvailable();\n\n  if (!session) {\n    return [];\n  }\n\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\n\n  const persistence = session.getItem(key);\n\n  switch (persistence) {\n    case Persistence.NONE:\n      return [exp.inMemoryPersistence];\n\n    case Persistence.LOCAL:\n      return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\n\n    case Persistence.SESSION:\n      return [exp.browserSessionPersistence];\n\n    default:\n      return [];\n  }\n}\n/** Returns session storage, or null if the property access errors */\n\n\nfunction getSessionStorageIfAvailable() {\n  var _a;\n\n  try {\n    return ((_a = _getSelfWindow()) === null || _a === void 0 ? void 0 : _a.sessionStorage) || null;\n  } catch (e) {\n    return null;\n  }\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst _assert$2 = exp._assert;\n/** Platform-agnostic popup-redirect resolver */\n\nclass CompatPopupRedirectResolver {\n  constructor() {\n    // Create both resolvers for dynamic resolution later\n    this.browserResolver = exp._getInstance(exp.browserPopupRedirectResolver);\n    this.cordovaResolver = exp._getInstance(exp.cordovaPopupRedirectResolver); // The actual resolver in use: either browserResolver or cordovaResolver.\n\n    this.underlyingResolver = null;\n    this._redirectPersistence = exp.browserSessionPersistence;\n    this._completeRedirectFn = exp._getRedirectResult;\n  }\n\n  async _initialize(auth) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._initialize(auth);\n  }\n\n  async _openPopup(auth, provider, authType, eventId) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openPopup(auth, provider, authType, eventId);\n  }\n\n  async _openRedirect(auth, provider, authType, eventId) {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openRedirect(auth, provider, authType, eventId);\n  }\n\n  _isIframeWebStorageSupported(auth, cb) {\n    this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\n  }\n\n  _originValidation(auth) {\n    return this.assertedUnderlyingResolver._originValidation(auth);\n  }\n\n  get _shouldInitProactively() {\n    return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\n  }\n\n  get assertedUnderlyingResolver() {\n    _assert$2(this.underlyingResolver, \"internal-error\"\n    /* INTERNAL_ERROR */\n    );\n\n    return this.underlyingResolver;\n  }\n\n  async selectUnderlyingResolver() {\n    if (this.underlyingResolver) {\n      return;\n    } // We haven't yet determined whether or not we're in Cordova; go ahead\n    // and determine that state now.\n\n\n    const isCordova = await _isCordova();\n    this.underlyingResolver = isCordova ? this.cordovaResolver : this.browserResolver;\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction unwrap(object) {\n  return object.unwrap();\n}\n\nfunction wrapped(object) {\n  return object.wrapped();\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nfunction credentialFromResponse(userCredential) {\n  return credentialFromObject(userCredential);\n}\n\nfunction attachExtraErrorFields(auth, e) {\n  var _a; // The response contains all fields from the server which may or may not\n  // actually match the underlying type\n\n\n  const response = (_a = e.customData) === null || _a === void 0 ? void 0 : _a._tokenResponse;\n\n  if (e.code === 'auth/multi-factor-auth-required') {\n    const mfaErr = e;\n    mfaErr.resolver = new MultiFactorResolver(auth, exp.getMultiFactorResolver(auth, e));\n  } else if (response) {\n    const credential = credentialFromObject(e);\n    const credErr = e;\n\n    if (credential) {\n      credErr.credential = credential;\n      credErr.tenantId = response.tenantId || undefined;\n      credErr.email = response.email || undefined;\n      credErr.phoneNumber = response.phoneNumber || undefined;\n    }\n  }\n}\n\nfunction credentialFromObject(object) {\n  const {\n    _tokenResponse\n  } = object instanceof FirebaseError ? object.customData : object;\n\n  if (!_tokenResponse) {\n    return null;\n  } // Handle phone Auth credential responses, as they have a different format\n  // from other backend responses (i.e. no providerId). This is also only the\n  // case for user credentials (does not work for errors).\n\n\n  if (!(object instanceof FirebaseError)) {\n    if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\n      return exp.PhoneAuthProvider.credentialFromResult(object);\n    }\n  }\n\n  const providerId = _tokenResponse.providerId; // Email and password is not supported as there is no situation where the\n  // server would return the password to the client.\n\n  if (!providerId || providerId === exp.ProviderId.PASSWORD) {\n    return null;\n  }\n\n  let provider;\n\n  switch (providerId) {\n    case exp.ProviderId.GOOGLE:\n      provider = exp.GoogleAuthProvider;\n      break;\n\n    case exp.ProviderId.FACEBOOK:\n      provider = exp.FacebookAuthProvider;\n      break;\n\n    case exp.ProviderId.GITHUB:\n      provider = exp.GithubAuthProvider;\n      break;\n\n    case exp.ProviderId.TWITTER:\n      provider = exp.TwitterAuthProvider;\n      break;\n\n    default:\n      const {\n        oauthIdToken,\n        oauthAccessToken,\n        oauthTokenSecret,\n        pendingToken,\n        nonce\n      } = _tokenResponse;\n\n      if (!oauthAccessToken && !oauthTokenSecret && !oauthIdToken && !pendingToken) {\n        return null;\n      } // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\n\n\n      if (pendingToken) {\n        if (providerId.startsWith('saml.')) {\n          return exp.SAMLAuthCredential._create(providerId, pendingToken);\n        } else {\n          // OIDC and non-default providers excluding Twitter.\n          return exp.OAuthCredential._fromParams({\n            providerId,\n            signInMethod: providerId,\n            pendingToken,\n            idToken: oauthIdToken,\n            accessToken: oauthAccessToken\n          });\n        }\n      }\n\n      return new exp.OAuthProvider(providerId).credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        rawNonce: nonce\n      });\n  }\n\n  return object instanceof FirebaseError ? provider.credentialFromError(object) : provider.credentialFromResult(object);\n}\n\nfunction convertCredential(auth, credentialPromise) {\n  return credentialPromise.catch(e => {\n    if (e instanceof FirebaseError) {\n      attachExtraErrorFields(auth, e);\n    }\n\n    throw e;\n  }).then(credential => {\n    const operationType = credential.operationType;\n    const user = credential.user;\n    return {\n      operationType,\n      credential: credentialFromResponse(credential),\n      additionalUserInfo: exp.getAdditionalUserInfo(credential),\n      user: User.getOrCreate(user)\n    };\n  });\n}\n\nasync function convertConfirmationResult(auth, confirmationResultPromise) {\n  const confirmationResultExp = await confirmationResultPromise;\n  return {\n    verificationId: confirmationResultExp.verificationId,\n    confirm: verificationCode => convertCredential(auth, confirmationResultExp.confirm(verificationCode))\n  };\n}\n\nclass MultiFactorResolver {\n  constructor(auth, resolver) {\n    this.resolver = resolver;\n    this.auth = wrapped(auth);\n  }\n\n  get session() {\n    return this.resolver.session;\n  }\n\n  get hints() {\n    return this.resolver.hints;\n  }\n\n  resolveSignIn(assertion) {\n    return convertCredential(unwrap(this.auth), this.resolver.resolveSignIn(assertion));\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass User {\n  constructor(_delegate) {\n    this._delegate = _delegate;\n    this.multiFactor = exp.multiFactor(_delegate);\n  }\n\n  static getOrCreate(user) {\n    if (!User.USER_MAP.has(user)) {\n      User.USER_MAP.set(user, new User(user));\n    }\n\n    return User.USER_MAP.get(user);\n  }\n\n  delete() {\n    return this._delegate.delete();\n  }\n\n  reload() {\n    return this._delegate.reload();\n  }\n\n  toJSON() {\n    return this._delegate.toJSON();\n  }\n\n  getIdTokenResult(forceRefresh) {\n    return this._delegate.getIdTokenResult(forceRefresh);\n  }\n\n  getIdToken(forceRefresh) {\n    return this._delegate.getIdToken(forceRefresh);\n  }\n\n  linkAndRetrieveDataWithCredential(credential) {\n    return this.linkWithCredential(credential);\n  }\n\n  async linkWithCredential(credential) {\n    return convertCredential(this.auth, exp.linkWithCredential(this._delegate, credential));\n  }\n\n  async linkWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this.auth, exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n\n  async linkWithPopup(provider) {\n    return convertCredential(this.auth, exp.linkWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n\n  async linkWithRedirect(provider) {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.linkWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n\n  reauthenticateAndRetrieveDataWithCredential(credential) {\n    return this.reauthenticateWithCredential(credential);\n  }\n\n  async reauthenticateWithCredential(credential) {\n    return convertCredential(this.auth, exp.reauthenticateWithCredential(this._delegate, credential));\n  }\n\n  reauthenticateWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this.auth, exp.reauthenticateWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n\n  reauthenticateWithPopup(provider) {\n    return convertCredential(this.auth, exp.reauthenticateWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n\n  async reauthenticateWithRedirect(provider) {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.reauthenticateWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n\n  sendEmailVerification(actionCodeSettings) {\n    return exp.sendEmailVerification(this._delegate, actionCodeSettings);\n  }\n\n  async unlink(providerId) {\n    await exp.unlink(this._delegate, providerId);\n    return this;\n  }\n\n  updateEmail(newEmail) {\n    return exp.updateEmail(this._delegate, newEmail);\n  }\n\n  updatePassword(newPassword) {\n    return exp.updatePassword(this._delegate, newPassword);\n  }\n\n  updatePhoneNumber(phoneCredential) {\n    return exp.updatePhoneNumber(this._delegate, phoneCredential);\n  }\n\n  updateProfile(profile) {\n    return exp.updateProfile(this._delegate, profile);\n  }\n\n  verifyBeforeUpdateEmail(newEmail, actionCodeSettings) {\n    return exp.verifyBeforeUpdateEmail(this._delegate, newEmail, actionCodeSettings);\n  }\n\n  get emailVerified() {\n    return this._delegate.emailVerified;\n  }\n\n  get isAnonymous() {\n    return this._delegate.isAnonymous;\n  }\n\n  get metadata() {\n    return this._delegate.metadata;\n  }\n\n  get phoneNumber() {\n    return this._delegate.phoneNumber;\n  }\n\n  get providerData() {\n    return this._delegate.providerData;\n  }\n\n  get refreshToken() {\n    return this._delegate.refreshToken;\n  }\n\n  get tenantId() {\n    return this._delegate.tenantId;\n  }\n\n  get displayName() {\n    return this._delegate.displayName;\n  }\n\n  get email() {\n    return this._delegate.email;\n  }\n\n  get photoURL() {\n    return this._delegate.photoURL;\n  }\n\n  get providerId() {\n    return this._delegate.providerId;\n  }\n\n  get uid() {\n    return this._delegate.uid;\n  }\n\n  get auth() {\n    return this._delegate.auth;\n  }\n\n} // Maintain a map so that there's always a 1:1 mapping between new User and\n// legacy compat users\n\n\nUser.USER_MAP = new WeakMap();\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst _assert$1 = exp._assert;\n\nclass Auth {\n  constructor(app, provider) {\n    this.app = app;\n\n    if (provider.isInitialized()) {\n      this._delegate = provider.getImmediate();\n      this.linkUnderlyingAuth();\n      return;\n    }\n\n    const {\n      apiKey\n    } = app.options; // TODO: platform needs to be determined using heuristics\n\n    _assert$1(apiKey, \"invalid-api-key\"\n    /* INVALID_API_KEY */\n    , {\n      appName: app.name\n    }); // TODO: platform needs to be determined using heuristics\n\n\n    _assert$1(apiKey, \"invalid-api-key\"\n    /* INVALID_API_KEY */\n    , {\n      appName: app.name\n    }); // Only use a popup/redirect resolver in browser environments\n\n\n    const resolver = typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\n    this._delegate = provider.initialize({\n      options: {\n        persistence: buildPersistenceHierarchy(apiKey, app.name),\n        popupRedirectResolver: resolver\n      }\n    });\n\n    this._delegate._updateErrorMap(exp.debugErrorMap);\n\n    this.linkUnderlyingAuth();\n  }\n\n  get emulatorConfig() {\n    return this._delegate.emulatorConfig;\n  }\n\n  get currentUser() {\n    if (!this._delegate.currentUser) {\n      return null;\n    }\n\n    return User.getOrCreate(this._delegate.currentUser);\n  }\n\n  get languageCode() {\n    return this._delegate.languageCode;\n  }\n\n  set languageCode(languageCode) {\n    this._delegate.languageCode = languageCode;\n  }\n\n  get settings() {\n    return this._delegate.settings;\n  }\n\n  get tenantId() {\n    return this._delegate.tenantId;\n  }\n\n  set tenantId(tid) {\n    this._delegate.tenantId = tid;\n  }\n\n  useDeviceLanguage() {\n    this._delegate.useDeviceLanguage();\n  }\n\n  signOut() {\n    return this._delegate.signOut();\n  }\n\n  useEmulator(url, options) {\n    exp.connectAuthEmulator(this._delegate, url, options);\n  }\n\n  applyActionCode(code) {\n    return exp.applyActionCode(this._delegate, code);\n  }\n\n  checkActionCode(code) {\n    return exp.checkActionCode(this._delegate, code);\n  }\n\n  confirmPasswordReset(code, newPassword) {\n    return exp.confirmPasswordReset(this._delegate, code, newPassword);\n  }\n\n  async createUserWithEmailAndPassword(email, password) {\n    return convertCredential(this._delegate, exp.createUserWithEmailAndPassword(this._delegate, email, password));\n  }\n\n  fetchProvidersForEmail(email) {\n    return this.fetchSignInMethodsForEmail(email);\n  }\n\n  fetchSignInMethodsForEmail(email) {\n    return exp.fetchSignInMethodsForEmail(this._delegate, email);\n  }\n\n  isSignInWithEmailLink(emailLink) {\n    return exp.isSignInWithEmailLink(this._delegate, emailLink);\n  }\n\n  async getRedirectResult() {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    );\n\n    const credential = await exp.getRedirectResult(this._delegate, CompatPopupRedirectResolver);\n\n    if (!credential) {\n      return {\n        credential: null,\n        user: null\n      };\n    }\n\n    return convertCredential(this._delegate, Promise.resolve(credential));\n  } // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\n  // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\n  // out of autogenerated documentation pages to reduce accidental misuse.\n\n\n  addFrameworkForLogging(framework) {\n    exp.addFrameworkForLogging(this._delegate, framework);\n  }\n\n  onAuthStateChanged(nextOrObserver, errorFn, completed) {\n    const {\n      next,\n      error,\n      complete\n    } = wrapObservers(nextOrObserver, errorFn, completed);\n    return this._delegate.onAuthStateChanged(next, error, complete);\n  }\n\n  onIdTokenChanged(nextOrObserver, errorFn, completed) {\n    const {\n      next,\n      error,\n      complete\n    } = wrapObservers(nextOrObserver, errorFn, completed);\n    return this._delegate.onIdTokenChanged(next, error, complete);\n  }\n\n  sendSignInLinkToEmail(email, actionCodeSettings) {\n    return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\n  }\n\n  sendPasswordResetEmail(email, actionCodeSettings) {\n    return exp.sendPasswordResetEmail(this._delegate, email, actionCodeSettings || undefined);\n  }\n\n  async setPersistence(persistence) {\n    _validatePersistenceArgument(this._delegate, persistence);\n\n    let converted;\n\n    switch (persistence) {\n      case Persistence.SESSION:\n        converted = exp.browserSessionPersistence;\n        break;\n\n      case Persistence.LOCAL:\n        // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\n        const isIndexedDBFullySupported = await exp._getInstance(exp.indexedDBLocalPersistence)._isAvailable();\n        converted = isIndexedDBFullySupported ? exp.indexedDBLocalPersistence : exp.browserLocalPersistence;\n        break;\n\n      case Persistence.NONE:\n        converted = exp.inMemoryPersistence;\n        break;\n\n      default:\n        return exp._fail(\"argument-error\"\n        /* ARGUMENT_ERROR */\n        , {\n          appName: this._delegate.name\n        });\n    }\n\n    return this._delegate.setPersistence(converted);\n  }\n\n  signInAndRetrieveDataWithCredential(credential) {\n    return this.signInWithCredential(credential);\n  }\n\n  signInAnonymously() {\n    return convertCredential(this._delegate, exp.signInAnonymously(this._delegate));\n  }\n\n  signInWithCredential(credential) {\n    return convertCredential(this._delegate, exp.signInWithCredential(this._delegate, credential));\n  }\n\n  signInWithCustomToken(token) {\n    return convertCredential(this._delegate, exp.signInWithCustomToken(this._delegate, token));\n  }\n\n  signInWithEmailAndPassword(email, password) {\n    return convertCredential(this._delegate, exp.signInWithEmailAndPassword(this._delegate, email, password));\n  }\n\n  signInWithEmailLink(email, emailLink) {\n    return convertCredential(this._delegate, exp.signInWithEmailLink(this._delegate, email, emailLink));\n  }\n\n  signInWithPhoneNumber(phoneNumber, applicationVerifier) {\n    return convertConfirmationResult(this._delegate, exp.signInWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier));\n  }\n\n  async signInWithPopup(provider) {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    );\n\n    return convertCredential(this._delegate, exp.signInWithPopup(this._delegate, provider, CompatPopupRedirectResolver));\n  }\n\n  async signInWithRedirect(provider) {\n    _assert$1(_isPopupRedirectSupported(), this._delegate, \"operation-not-supported-in-this-environment\"\n    /* OPERATION_NOT_SUPPORTED */\n    );\n\n    await _savePersistenceForRedirect(this._delegate);\n    return exp.signInWithRedirect(this._delegate, provider, CompatPopupRedirectResolver);\n  }\n\n  updateCurrentUser(user) {\n    // remove ts-ignore once overloads are defined for exp functions to accept compat objects\n    // @ts-ignore\n    return this._delegate.updateCurrentUser(user);\n  }\n\n  verifyPasswordResetCode(code) {\n    return exp.verifyPasswordResetCode(this._delegate, code);\n  }\n\n  unwrap() {\n    return this._delegate;\n  }\n\n  _delete() {\n    return this._delegate._delete();\n  }\n\n  linkUnderlyingAuth() {\n    this._delegate.wrapped = () => this;\n  }\n\n}\n\nAuth.Persistence = Persistence;\n\nfunction wrapObservers(nextOrObserver, error, complete) {\n  let next = nextOrObserver;\n\n  if (typeof nextOrObserver !== 'function') {\n    ({\n      next,\n      error,\n      complete\n    } = nextOrObserver);\n  } // We know 'next' is now a function\n\n\n  const oldNext = next;\n\n  const newNext = user => oldNext(user && User.getOrCreate(user));\n\n  return {\n    next: newNext,\n    error: error,\n    complete\n  };\n}\n\nfunction buildPersistenceHierarchy(apiKey, appName) {\n  // Note this is slightly different behavior: in this case, the stored\n  // persistence is checked *first* rather than last. This is because we want\n  // to prefer stored persistence type in the hierarchy. This is an empty\n  // array if window is not available or there is no pending redirect\n  const persistences = _getPersistencesFromRedirect(apiKey, appName); // If \"self\" is available, add indexedDB\n\n\n  if (typeof self !== 'undefined' && !persistences.includes(exp.indexedDBLocalPersistence)) {\n    persistences.push(exp.indexedDBLocalPersistence);\n  } // If \"window\" is available, add HTML Storage persistences\n\n\n  if (typeof window !== 'undefined') {\n    for (const persistence of [exp.browserLocalPersistence, exp.browserSessionPersistence]) {\n      if (!persistences.includes(persistence)) {\n        persistences.push(persistence);\n      }\n    }\n  } // Add in-memory as a final fallback\n\n\n  if (!persistences.includes(exp.inMemoryPersistence)) {\n    persistences.push(exp.inMemoryPersistence);\n  }\n\n  return persistences;\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nclass PhoneAuthProvider {\n  constructor() {\n    this.providerId = 'phone'; // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n\n    this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth()));\n  }\n\n  static credential(verificationId, verificationCode) {\n    return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\n  }\n\n  verifyPhoneNumber(phoneInfoOptions, applicationVerifier) {\n    return this._delegate.verifyPhoneNumber( // The implementation matches but the types are subtly incompatible\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    phoneInfoOptions, applicationVerifier);\n  }\n\n  unwrap() {\n    return this._delegate;\n  }\n\n}\n\nPhoneAuthProvider.PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\nPhoneAuthProvider.PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nconst _assert = exp._assert;\n\nclass RecaptchaVerifier {\n  constructor(container, parameters) {\n    let app = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : firebase.app();\n\n    var _a; // API key is required for web client RPC calls.\n\n\n    _assert((_a = app.options) === null || _a === void 0 ? void 0 : _a.apiKey, \"invalid-api-key\"\n    /* INVALID_API_KEY */\n    , {\n      appName: app.name\n    });\n\n    this._delegate = new exp.RecaptchaVerifier(container, // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    parameters, // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n    app.auth());\n    this.type = this._delegate.type;\n  }\n\n  clear() {\n    this._delegate.clear();\n  }\n\n  render() {\n    return this._delegate.render();\n  }\n\n  verify() {\n    return this._delegate.verify();\n  }\n\n}\n/**\r\n * @license\r\n * Copyright 2020 Google LLC\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\n\nconst AUTH_TYPE = 'auth-compat'; // Create auth components to register with firebase.\n// Provides Auth public APIs.\n\nfunction registerAuthCompat(instance) {\n  instance.INTERNAL.registerComponent(new Component(AUTH_TYPE, container => {\n    // getImmediate for FirebaseApp will always succeed\n    const app = container.getProvider('app-compat').getImmediate();\n    const authProvider = container.getProvider('auth');\n    return new Auth(app, authProvider);\n  }, \"PUBLIC\"\n  /* PUBLIC */\n  ).setServiceProps({\n    ActionCodeInfo: {\n      Operation: {\n        EMAIL_SIGNIN: exp.ActionCodeOperation.EMAIL_SIGNIN,\n        PASSWORD_RESET: exp.ActionCodeOperation.PASSWORD_RESET,\n        RECOVER_EMAIL: exp.ActionCodeOperation.RECOVER_EMAIL,\n        REVERT_SECOND_FACTOR_ADDITION: exp.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\n        VERIFY_AND_CHANGE_EMAIL: exp.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\n        VERIFY_EMAIL: exp.ActionCodeOperation.VERIFY_EMAIL\n      }\n    },\n    EmailAuthProvider: exp.EmailAuthProvider,\n    FacebookAuthProvider: exp.FacebookAuthProvider,\n    GithubAuthProvider: exp.GithubAuthProvider,\n    GoogleAuthProvider: exp.GoogleAuthProvider,\n    OAuthProvider: exp.OAuthProvider,\n    SAMLAuthProvider: exp.SAMLAuthProvider,\n    PhoneAuthProvider: PhoneAuthProvider,\n    PhoneMultiFactorGenerator: exp.PhoneMultiFactorGenerator,\n    RecaptchaVerifier: RecaptchaVerifier,\n    TwitterAuthProvider: exp.TwitterAuthProvider,\n    Auth,\n    AuthCredential: exp.AuthCredential,\n    Error: FirebaseError\n  }).setInstantiationMode(\"LAZY\"\n  /* LAZY */\n  ).setMultipleInstances(false));\n  instance.registerVersion(name, version);\n}\n\nregisterAuthCompat(firebase);","map":{"version":3,"mappings":";;;;;;AAAA;;;;;;;;;;;;;;;;;AAiCA,MAAMA,gCAAgC,GAAG,IAAzC;;AAEA,SAASC,iBAAT,GAA0B;;;AACxB,SAAO,WAAI,SAAJ,QAAI,WAAJ,GAAI,MAAJ,OAAI,CAAEC,QAAN,MAAc,IAAd,IAAcC,aAAd,GAAc,MAAd,GAAcA,GAAEC,QAAhB,KAA4B,IAAnC;AACD;AAED;;;;;AAGA,SAASC,cAAT,GAAuB;AACrB,SAAOJ,iBAAiB,OAAO,OAAxB,IAAmCA,iBAAiB,OAAO,QAAlE;AACD;AAED;;;;;;;SAKgBK,+BAAiD;AAAA,MAApBC,EAAoB,uEAAPC,KAAK,EAAE;AAC/D,SAAO,CAAC,EACN,CAACP,iBAAiB,OAAO,OAAxB,IAAmCA,iBAAiB,OAAO,QAA5D,KACAM,EAAE,CAACE,WAAH,GAAiBC,KAAjB,CAAuB,0BAAvB,CAFM,CAAR;AAID;AAED;;;;;;AAIA,SAASC,oBAAT,GAA6B;AAC3B,SAAOC,aAAa,MAAMC,MAAM,EAAhC;AACD;AAED;;;;;;AAIA,SAASC,OAAT,GAAgB;AACd,SAAOC,IAAI,MAAM,SAAQ,SAAR,YAAQ,WAAR,GAAQ,MAAR,WAAQ,CAAEC,YAAV,MAA2B,EAA5C;AACD;AAED;;;;;;;AAKA,SAASC,OAAT,GAAqC;AAAA,MAApBV,EAAoB,uEAAPC,KAAK,EAAE;AACnC,SAAO,YAAYU,IAAZ,CAAiBX,EAAjB,CAAP;AACD;AAED;;;;;;;AAKA,SAASY,8BAAT,GAA4D;AAAA,MAApBZ,EAAoB,uEAAPC,KAAK,EAAE;AAC1D,SAAOM,OAAO,MAAMG,OAAO,CAACV,EAAD,CAA3B;AACD;AAED;;;SACgBa,yBAAsB;AACpC,MAAI;AACF,UAAMC,OAAO,GAAGC,IAAI,CAACC,YAArB;;AACA,UAAMC,GAAG,GAAGC,GAAI,CAACC,gBAALD,EAAZ;;AACA,QAAIJ,OAAJ,EAAa;;;AAGXA,aAAO,CAAC,SAAD,CAAP,CAAmBG,GAAnB,EAAwB,GAAxB;AACAH,aAAO,CAAC,YAAD,CAAP,CAAsBG,GAAtB,EAJW;;;;;;AAUX,UAAIL,8BAA8B,EAAlC,EAAsC;;;AAGpC,eAAOQ,oBAAoB,EAA3B;AACD;;AACD,aAAO,IAAP;AACD;AACF,GApBD,CAoBE,OAAOC,CAAP,EAAU;;;AAGV,WAAOC,SAAS,MAAMF,oBAAoB,EAA1C;AACD;;AACD,SAAO,KAAP;AACD;AAED;;;;;;SAIgBE,YAAS;;AAEvB,SACE,OAAOC,MAAP,KAAkB,WAAlB,IACA,uBAAuBA,MADvB,IAEA,mBAAmBA,MAHrB;AAKD;;SAEeC,4BAAyB;AACvC,SACE,CAAC1B,cAAc,MACb2B,kBAAkB,EADnB,IAEC1B,4BAA4B,EAF9B;;AAKA,GAACK,oBAAoB,EALrB;;AAQAS,wBAAsB,EARtB;AAUA,GAACS,SAAS,EAXZ;AAaD;AAED;;;SACgBI,mBAAgB;AAC9B,SAAO3B,4BAA4B,MAAM,OAAO4B,QAAP,KAAoB,WAA7D;AACD;;AAEM,eAAeC,UAAf,GAAyB;AAC9B,MAAI,CAACF,gBAAgB,EAArB,EAAyB;AACvB,WAAO,KAAP;AACD;;AAED,SAAO,IAAIG,OAAJ,CAAYC,OAAO;AACxB,UAAMC,SAAS,GAAGC,UAAU,CAAC;;AAE3BF,aAAO,CAAC,KAAD,CAAP;AACD,KAH2B,EAGzBrC,gCAHyB,CAA5B;AAKAkC,YAAQ,CAACM,gBAAT,CAA0B,aAA1B,EAAyC;AACvCC,kBAAY,CAACH,SAAD,CAAZ;AACAD,aAAO,CAAC,IAAD,CAAP;AACD,KAHD;AAID,GAVM,CAAP;AAWD;;SAEeK,iBAAc;AAC5B,SAAO,OAAOC,MAAP,KAAkB,WAAlB,GAAgCA,MAAhC,GAAyC,IAAhD;AACF;AChLA;;;;;;;;;;;;;;;;;;AAqBO,MAAMC,WAAW,GAAG;AACzBC,OAAK,EAAE,OADkB;AAEzBC,MAAI,EAAE,MAFmB;AAGzBC,SAAO,EAAE;AAHgB,CAApB;AAMP,MAAMC,SAAO,GAAuBC,GAAG,CAACD,OAAxC;AAEA,MAAME,eAAe,GAAG,aAAxB;AAEA;;;;;SAIgBC,6BACdC,MACAC,aAAmB;AAEnBL,WAAO,CACLM,MAAM,CAACC,MAAP,CAAcX,WAAd,EAA2BY,QAA3B,CAAoCH,WAApC,CADK,EAELD,IAFK,EAED;AAAA;AAFC,GAAPJ,CAFmB;;;AAQnB,MAAIpC,aAAa,EAAjB,EAAqB;;AAEnBoC,aAAO,CACLK,WAAW,KAAKT,WAAW,CAACG,OADvB,EAELK,IAFK,EAED;AAAA;AAFC,KAAPJ;;AAKA;AACD;;AACD,MAAInC,MAAM,EAAV,EAAc;;AAEZmC,aAAO,CACLK,WAAW,KAAKT,WAAW,CAACE,IADvB,EAELM,IAFK,EAED;AAAA;AAFC,KAAPJ;;AAKA;AACD;;AACD,MAAInB,SAAS,EAAb,EAAiB;;;AAGfmB,aAAO,CACLK,WAAW,KAAKT,WAAW,CAACE,IAA5B,IACGO,WAAW,KAAKT,WAAW,CAACC,KAA5B,IAAqClB,oBAAoB,EAFvD,EAGLyB,IAHK,EAGD;AAAA;AAHC,KAAPJ;;AAMA;AACD,GApCkB;;;AAsCnBA,WAAO,CACLK,WAAW,KAAKT,WAAW,CAACE,IAA5B,IAAoC1B,sBAAsB,EADrD,EAELgC,IAFK,EAED;AAAA;AAFC,GAAPJ;AAKD;;AAEM,eAAeS,2BAAf,CACLL,IADK,EACiB;AAEtB,QAAMA,IAAI,CAACM,sBAAX;AACA,QAAMC,OAAO,GAAGC,4BAA4B,EAA5C;;AACA,QAAMpC,GAAG,GAAGyB,GAAG,CAACY,mBAAJ,CACVX,eADU,EAEVE,IAAI,CAACU,MAAL,CAAYC,MAFF,EAGVX,IAAI,CAACY,IAHK,CAAZ;;AAKA,MAAIL,OAAJ,EAAa;AACXA,WAAO,CAACM,OAAR,CAAgBzC,GAAhB,EAAqB4B,IAAI,CAACc,eAAL,EAArB;AACD;AACF;;SAEeC,6BACdJ,QACAK,SAAe;AAEf,QAAMT,OAAO,GAAGC,4BAA4B,EAA5C;;AACA,MAAI,CAACD,OAAL,EAAc;AACZ,WAAO,EAAP;AACD;;AAED,QAAMnC,GAAG,GAAGyB,GAAG,CAACY,mBAAJ,CAAwBX,eAAxB,EAAyCa,MAAzC,EAAiDK,OAAjD,CAAZ;;AACA,QAAMf,WAAW,GAAGM,OAAO,CAACU,OAAR,CAAgB7C,GAAhB,CAApB;;AAEA,UAAQ6B,WAAR;AACE,SAAKT,WAAW,CAACE,IAAjB;AACE,aAAO,CAACG,GAAG,CAACqB,mBAAL,CAAP;;AACF,SAAK1B,WAAW,CAACC,KAAjB;AACE,aAAO,CAACI,GAAG,CAACsB,yBAAL,EAAgCtB,GAAG,CAACuB,yBAApC,CAAP;;AACF,SAAK5B,WAAW,CAACG,OAAjB;AACE,aAAO,CAACE,GAAG,CAACuB,yBAAL,CAAP;;AACF;AACE,aAAO,EAAP;AARJ;AAUD;AAED;;;AACA,SAASZ,4BAAT,GAAqC;;;AACnC,MAAI;AACF,WAAO,qBAAc,EAAd,MAAgB,IAAhB,IAAgBzD,aAAhB,GAAgB,MAAhB,GAAgBA,GAAEsE,cAAlB,KAAoC,IAA3C;AACD,GAFD,CAEE,OAAO7C,CAAP,EAAU;AACV,WAAO,IAAP;AACD;AACH;AChIA;;;;;;;;;;;;;;;;;;AAoBA,MAAMoB,SAAO,GAAuBC,GAAG,CAACD,OAAxC;AAEA;;MACa0B,4BAA2B;AAAxCC;;AAImB,2BACf1B,GAAG,CAAC2B,YAAJ,CAAiB3B,GAAG,CAAC4B,4BAArB,CADe;AAEA,2BACf5B,GAAG,CAAC2B,YAAJ,CAAiB3B,GAAG,CAAC6B,4BAArB,CADe,CANnB;;AASU,8BAA+D,IAA/D;AACR,gCAAuB7B,GAAG,CAACuB,yBAA3B;AAEA,+BAI0CvB,GAAG,CAAC8B,kBAJ9C;AAyED;;AAnEkB,QAAXC,WAAW,CAAC5B,IAAD,EAAmB;AAClC,UAAM,KAAK6B,wBAAL,EAAN;AACA,WAAO,KAAKC,0BAAL,CAAgCF,WAAhC,CAA4C5B,IAA5C,CAAP;AACD;;AAEe,QAAV+B,UAAU,CACd/B,IADc,EAEdgC,QAFc,EAGdC,QAHc,EAIdC,OAJc,EAIE;AAEhB,UAAM,KAAKL,wBAAL,EAAN;AACA,WAAO,KAAKC,0BAAL,CAAgCC,UAAhC,CACL/B,IADK,EAELgC,QAFK,EAGLC,QAHK,EAILC,OAJK,CAAP;AAMD;;AAEkB,QAAbC,aAAa,CACjBnC,IADiB,EAEjBgC,QAFiB,EAGjBC,QAHiB,EAIjBC,OAJiB,EAID;AAEhB,UAAM,KAAKL,wBAAL,EAAN;AACA,WAAO,KAAKC,0BAAL,CAAgCK,aAAhC,CACLnC,IADK,EAELgC,QAFK,EAGLC,QAHK,EAILC,OAJK,CAAP;AAMD;;AAEDE,8BAA4B,CAC1BpC,IAD0B,EAE1BqC,EAF0B,EAEO;AAEjC,SAAKP,0BAAL,CAAgCM,4BAAhC,CAA6DpC,IAA7D,EAAmEqC,EAAnE;AACD;;AAEDC,mBAAiB,CAACtC,IAAD,EAAe;AAC9B,WAAO,KAAK8B,0BAAL,CAAgCQ,iBAAhC,CAAkDtC,IAAlD,CAAP;AACD;;AAEyB,MAAtBuC,sBAAsB;AACxB,WAAO1D,gBAAgB,MAAM,KAAK2D,eAAL,CAAqBD,sBAAlD;AACD;;AAEqC,MAA1BT,0BAA0B;AACpClC,aAAO,CAAC,KAAK6C,kBAAN,EAAwB;AAAA;AAAxB,KAAP7C;;AACA,WAAO,KAAK6C,kBAAZ;AACD;;AAEqC,QAAxBZ,wBAAwB;AACpC,QAAI,KAAKY,kBAAT,EAA6B;AAC3B;AACD,KAHmC;;;;AAOpC,UAAMC,SAAS,GAAG,MAAM3D,UAAU,EAAlC;AACA,SAAK0D,kBAAL,GAA0BC,SAAS,GAC/B,KAAKC,eAD0B,GAE/B,KAAKH,eAFT;AAGD;;AApFqC;ACvBxC;;;;;;;;;;;;;;;;;;SA2BgBI,OAAUC,QAAe;AACvC,SAAQA,MAAqB,CAACD,MAAtB,EAAR;AACD;;SAEeE,QAAWD,QAAe;AACxC,SAAQA,MAA4B,CAACC,OAA7B,EAAR;AACF;ACjCA;;;;;;;;;;;;;;;;;;AAwBA,SAASC,sBAAT,CACEC,cADF,EAC4C;AAE1C,SAAOC,oBAAoB,CAACD,cAAD,CAA3B;AACD;;AAED,SAASE,sBAAT,CAAgClD,IAAhC,EAAgDxB,CAAhD,EAAgE;SAAA;;;;AAG9D,QAAM2E,QAAQ,GAAG,MAAC3E,CAAC,CAAC4E,UAAH,MAAyD,IAAzD,IAAyDrG,aAAzD,GAAyD,MAAzD,GAAyDA,GACtEsG,cADJ;;AAEA,MAAI7E,CAAC,CAAC8E,IAAF,KAAW,iCAAf,EAAkD;AAChD,UAAMC,MAAM,GAAG/E,CAAf;AACA+E,UAAM,CAACC,QAAP,GAAkB,IAAIC,mBAAJ,CAChBzD,IADgB,EAEhBH,GAAG,CAAC6D,sBAAJ,CAA2B1D,IAA3B,EAAiCxB,CAAjC,CAFgB,CAAlB;AAID,GAND,MAMO,IAAI2E,QAAJ,EAAc;AACnB,UAAMQ,UAAU,GAAGV,oBAAoB,CAACzE,CAAD,CAAvC;AACA,UAAMoF,OAAO,GAAGpF,CAAhB;;AACA,QAAImF,UAAJ,EAAgB;AACdC,aAAO,CAACD,UAAR,GAAqBA,UAArB;AACAC,aAAO,CAACC,QAAR,GAAmBV,QAAQ,CAACU,QAAT,IAAqBC,SAAxC;AACAF,aAAO,CAACG,KAAR,GAAgBZ,QAAQ,CAACY,KAAT,IAAkBD,SAAlC;AACAF,aAAO,CAACI,WAAR,GAAsBb,QAAQ,CAACa,WAAT,IAAwBF,SAA9C;AACD;AACF;AACF;;AAED,SAASb,oBAAT,CACEJ,MADF,EAC4C;AAE1C,QAAM;AAAEQ;AAAF,MACJR,MAAM,YAAYoB,aAAlB,GAAkCpB,MAAM,CAACO,UAAzC,GAAsDP,MADxD;;AAGA,MAAI,CAACQ,cAAL,EAAqB;AACnB,WAAO,IAAP;AACD,GAPyC;;;;;AAY1C,MAAI,EAAER,MAAM,YAAYoB,aAApB,CAAJ,EAAwC;AACtC,QAAI,oBAAoBZ,cAApB,IAAsC,iBAAiBA,cAA3D,EAA2E;AACzE,aAAOxD,GAAG,CAACqE,iBAAJ,CAAsBC,oBAAtB,CAA2CtB,MAA3C,CAAP;AACD;AACF;;AAED,QAAMuB,UAAU,GAAGf,cAAc,CAACe,UAAlC,CAlB0C;;;AAsB1C,MAAI,CAACA,UAAD,IAAeA,UAAU,KAAKvE,GAAG,CAACwE,UAAJ,CAAeC,QAAjD,EAA2D;AACzD,WAAO,IAAP;AACD;;AAED,MAAItC,QAAJ;;AAIA,UAAQoC,UAAR;AACE,SAAKvE,GAAG,CAACwE,UAAJ,CAAeE,MAApB;AACEvC,cAAQ,GAAGnC,GAAG,CAAC2E,kBAAf;AACA;;AACF,SAAK3E,GAAG,CAACwE,UAAJ,CAAeI,QAApB;AACEzC,cAAQ,GAAGnC,GAAG,CAAC6E,oBAAf;AACA;;AACF,SAAK7E,GAAG,CAACwE,UAAJ,CAAeM,MAApB;AACE3C,cAAQ,GAAGnC,GAAG,CAAC+E,kBAAf;AACA;;AACF,SAAK/E,GAAG,CAACwE,UAAJ,CAAeQ,OAApB;AACE7C,cAAQ,GAAGnC,GAAG,CAACiF,mBAAf;AACA;;AACF;AACE,YAAM;AACJC,oBADI;AAEJC,wBAFI;AAGJC,wBAHI;AAIJC,oBAJI;AAKJC;AALI,UAMF9B,cANJ;;AAOA,UACE,CAAC2B,gBAAD,IACA,CAACC,gBADD,IAEA,CAACF,YAFD,IAGA,CAACG,YAJH,EAKE;AACA,eAAO,IAAP;AACD,OAfH;;;AAiBE,UAAIA,YAAJ,EAAkB;AAChB,YAAId,UAAU,CAACgB,UAAX,CAAsB,OAAtB,CAAJ,EAAoC;AAClC,iBAAOvF,GAAG,CAACwF,kBAAJ,CAAuBC,OAAvB,CAA+BlB,UAA/B,EAA2Cc,YAA3C,CAAP;AACD,SAFD,MAEO;;AAEL,iBAAOrF,GAAG,CAAC0F,eAAJ,CAAoBC,WAApB,CAAgC;AACrCpB,sBADqC;AAErCqB,wBAAY,EAAErB,UAFuB;AAGrCc,wBAHqC;AAIrCQ,mBAAO,EAAEX,YAJ4B;AAKrCY,uBAAW,EAAEX;AALwB,WAAhC,CAAP;AAOD;AACF;;AACD,aAAO,IAAInF,GAAG,CAAC+F,aAAR,CAAsBxB,UAAtB,EAAkCT,UAAlC,CAA6C;AAClD+B,eAAO,EAAEX,YADyC;AAElDY,mBAAW,EAAEX,gBAFqC;AAGlDa,gBAAQ,EAAEV;AAHwC,OAA7C,CAAP;AA5CJ;;AAmDA,SAAOtC,MAAM,YAAYoB,aAAlB,GACHjC,QAAQ,CAAC8D,mBAAT,CAA6BjD,MAA7B,CADG,GAEHb,QAAQ,CAACmC,oBAAT,CAA8BtB,MAA9B,CAFJ;AAGD;;SAEekD,kBACd/F,MACAgG,mBAA8C;AAE9C,SAAOA,iBAAiB,CACrBC,KADI,CACEzH,CAAC;AACN,QAAIA,CAAC,YAAYyF,aAAjB,EAAgC;AAC9Bf,4BAAsB,CAAClD,IAAD,EAAOxB,CAAP,CAAtB;AACD;;AACD,UAAMA,CAAN;AACD,GANI,EAOJ0H,IAPI,CAOCvC,UAAU;AACd,UAAMwC,aAAa,GAAGxC,UAAU,CAACwC,aAAjC;AACA,UAAMC,IAAI,GAAGzC,UAAU,CAACyC,IAAxB;AAEA,WAAO;AACLD,mBADK;AAELxC,gBAAU,EAAEZ,sBAAsB,CAChCY,UADgC,CAF7B;AAKL0C,wBAAkB,EAAExG,GAAG,CAACyG,qBAAJ,CAClB3C,UADkB,CALf;AAQLyC,UAAI,EAAEG,IAAI,CAACC,WAAL,CAAiBJ,IAAjB;AARD,KAAP;AAUD,GArBI,CAAP;AAsBD;;AAEM,eAAeK,yBAAf,CACLzG,IADK,EAEL0G,yBAFK,EAEqD;AAE1D,QAAMC,qBAAqB,GAAG,MAAMD,yBAApC;AACA,SAAO;AACLE,kBAAc,EAAED,qBAAqB,CAACC,cADjC;AAELC,WAAO,EAAGC,gBAAD,IACPf,iBAAiB,CAAC/F,IAAD,EAAO2G,qBAAqB,CAACE,OAAtB,CAA8BC,gBAA9B,CAAP;AAHd,GAAP;AAKD;;AAED,MAAMrD,mBAAN,CAAyB;AAEvBlC,cACEvB,IADF,EAEmBwD,QAFnB,EAEoD;AAAjC;AAEjB,SAAKxD,IAAL,GAAY8C,OAAO,CAAC9C,IAAD,CAAnB;AACD;;AAEU,MAAPO,OAAO;AACT,WAAO,KAAKiD,QAAL,CAAcjD,OAArB;AACD;;AAEQ,MAALwG,KAAK;AACP,WAAO,KAAKvD,QAAL,CAAcuD,KAArB;AACD;;AAEDC,eAAa,CACXC,SADW,EAC2B;AAEtC,WAAOlB,iBAAiB,CACtBnD,MAAM,CAAC,KAAK5C,IAAN,CADgB,EAEtB,KAAKwD,QAAL,CAAcwD,aAAd,CAA4BC,SAA5B,CAFsB,CAAxB;AAID;;AAxBsB;ACpLzB;;;;;;;;;;;;;;;;;;MA2BaV,KAAI;AAOfhF,cAA6B2F,SAA7B,EAAgD;AAAnB;AAC3B,SAAKC,WAAL,GAAmBtH,GAAG,CAACsH,WAAJ,CAAgBD,SAAhB,CAAnB;AACD;;AAEiB,SAAXV,WAAW,CAACJ,IAAD,EAAe;AAC/B,QAAI,CAACG,IAAI,CAACa,QAAL,CAAcC,GAAd,CAAkBjB,IAAlB,CAAL,EAA8B;AAC5BG,UAAI,CAACa,QAAL,CAAcE,GAAd,CAAkBlB,IAAlB,EAAwB,IAAIG,IAAJ,CAASH,IAAT,CAAxB;AACD;;AAED,WAAOG,IAAI,CAACa,QAAL,CAAcG,GAAd,CAAkBnB,IAAlB,CAAP;AACD;;AAEDoB,QAAM;AACJ,WAAO,KAAKN,SAAL,CAAeM,MAAf,EAAP;AACD;;AACDC,QAAM;AACJ,WAAO,KAAKP,SAAL,CAAeO,MAAf,EAAP;AACD;;AACDC,QAAM;AACJ,WAAO,KAAKR,SAAL,CAAeQ,MAAf,EAAP;AACD;;AACDC,kBAAgB,CAACC,YAAD,EAAuB;AACrC,WAAO,KAAKV,SAAL,CAAeS,gBAAf,CAAgCC,YAAhC,CAAP;AACD;;AACDC,YAAU,CAACD,YAAD,EAAuB;AAC/B,WAAO,KAAKV,SAAL,CAAeW,UAAf,CAA0BD,YAA1B,CAAP;AACD;;AACDE,mCAAiC,CAC/BnE,UAD+B,EACE;AAEjC,WAAO,KAAKoE,kBAAL,CAAwBpE,UAAxB,CAAP;AACD;;AACuB,QAAlBoE,kBAAkB,CACtBpE,UADsB,EACW;AAEjC,WAAOoC,iBAAiB,CACtB,KAAK/F,IADiB,EAEtBH,GAAG,CAACkI,kBAAJ,CAAuB,KAAKb,SAA5B,EAAuCvD,UAAvC,CAFsB,CAAxB;AAID;;AACwB,QAAnBqE,mBAAmB,CACvBhE,WADuB,EAEvBiE,mBAFuB,EAEwB;AAE/C,WAAOxB,yBAAyB,CAC9B,KAAKzG,IADyB,EAE9BH,GAAG,CAACmI,mBAAJ,CAAwB,KAAKd,SAA7B,EAAwClD,WAAxC,EAAqDiE,mBAArD,CAF8B,CAAhC;AAID;;AACkB,QAAbC,aAAa,CACjBlG,QADiB,EACY;AAE7B,WAAO+D,iBAAiB,CACtB,KAAK/F,IADiB,EAEtBH,GAAG,CAACqI,aAAJ,CACE,KAAKhB,SADP,EAEElF,QAFF,EAGEV,2BAHF,CAFsB,CAAxB;AAQD;;AACqB,QAAhB6G,gBAAgB,CAACnG,QAAD,EAA8B;AAClD,UAAM3B,2BAA2B,CAACR,GAAG,CAACuI,SAAJ,CAAc,KAAKpI,IAAnB,CAAD,CAAjC;AACA,WAAOH,GAAG,CAACsI,gBAAJ,CACL,KAAKjB,SADA,EAELlF,QAFK,EAGLV,2BAHK,CAAP;AAKD;;AACD+G,6CAA2C,CACzC1E,UADyC,EACR;AAEjC,WAAO,KAAK2E,4BAAL,CAAkC3E,UAAlC,CAAP;AACD;;AACiC,QAA5B2E,4BAA4B,CAChC3E,UADgC,EACC;AAEjC,WAAOoC,iBAAiB,CACtB,KAAK/F,IADiB,EAEtBH,GAAG,CAACyI,4BAAJ,CACE,KAAKpB,SADP,EAEEvD,UAFF,CAFsB,CAAxB;AAOD;;AACD4E,+BAA6B,CAC3BvE,WAD2B,EAE3BiE,mBAF2B,EAEoB;AAE/C,WAAOxB,yBAAyB,CAC9B,KAAKzG,IADyB,EAE9BH,GAAG,CAAC0I,6BAAJ,CACE,KAAKrB,SADP,EAEElD,WAFF,EAGEiE,mBAHF,CAF8B,CAAhC;AAQD;;AACDO,yBAAuB,CACrBxG,QADqB,EACQ;AAE7B,WAAO+D,iBAAiB,CACtB,KAAK/F,IADiB,EAEtBH,GAAG,CAAC2I,uBAAJ,CACE,KAAKtB,SADP,EAEElF,QAFF,EAGEV,2BAHF,CAFsB,CAAxB;AAQD;;AAC+B,QAA1BmH,0BAA0B,CAC9BzG,QAD8B,EACD;AAE7B,UAAM3B,2BAA2B,CAACR,GAAG,CAACuI,SAAJ,CAAc,KAAKpI,IAAnB,CAAD,CAAjC;AACA,WAAOH,GAAG,CAAC4I,0BAAJ,CACL,KAAKvB,SADA,EAELlF,QAFK,EAGLV,2BAHK,CAAP;AAKD;;AACDoH,uBAAqB,CACnBC,kBADmB,EACkC;AAErD,WAAO9I,GAAG,CAAC6I,qBAAJ,CAA0B,KAAKxB,SAA/B,EAA0CyB,kBAA1C,CAAP;AACD;;AACW,QAANC,MAAM,CAACxE,UAAD,EAAmB;AAC7B,UAAMvE,GAAG,CAAC+I,MAAJ,CAAW,KAAK1B,SAAhB,EAA2B9C,UAA3B,CAAN;AACA,WAAO,IAAP;AACD;;AACDyE,aAAW,CAACC,QAAD,EAAiB;AAC1B,WAAOjJ,GAAG,CAACgJ,WAAJ,CAAgB,KAAK3B,SAArB,EAAgC4B,QAAhC,CAAP;AACD;;AACDC,gBAAc,CAACC,WAAD,EAAoB;AAChC,WAAOnJ,GAAG,CAACkJ,cAAJ,CAAmB,KAAK7B,SAAxB,EAAmC8B,WAAnC,CAAP;AACD;;AACDC,mBAAiB,CAACC,eAAD,EAAuC;AACtD,WAAOrJ,GAAG,CAACoJ,iBAAJ,CACL,KAAK/B,SADA,EAELgC,eAFK,CAAP;AAID;;AACDC,eAAa,CAACC,OAAD,EAGZ;AACC,WAAOvJ,GAAG,CAACsJ,aAAJ,CAAkB,KAAKjC,SAAvB,EAAkCkC,OAAlC,CAAP;AACD;;AACDC,yBAAuB,CACrBP,QADqB,EAErBH,kBAFqB,EAEgC;AAErD,WAAO9I,GAAG,CAACwJ,uBAAJ,CACL,KAAKnC,SADA,EAEL4B,QAFK,EAGLH,kBAHK,CAAP;AAKD;;AACgB,MAAbW,aAAa;AACf,WAAO,KAAKpC,SAAL,CAAeoC,aAAtB;AACD;;AACc,MAAXC,WAAW;AACb,WAAO,KAAKrC,SAAL,CAAeqC,WAAtB;AACD;;AACW,MAARC,QAAQ;AACV,WAAO,KAAKtC,SAAL,CAAesC,QAAtB;AACD;;AACc,MAAXxF,WAAW;AACb,WAAO,KAAKkD,SAAL,CAAelD,WAAtB;AACD;;AACe,MAAZyF,YAAY;AACd,WAAO,KAAKvC,SAAL,CAAeuC,YAAtB;AACD;;AACe,MAAZC,YAAY;AACd,WAAO,KAAKxC,SAAL,CAAewC,YAAtB;AACD;;AACW,MAAR7F,QAAQ;AACV,WAAO,KAAKqD,SAAL,CAAerD,QAAtB;AACD;;AACc,MAAX8F,WAAW;AACb,WAAO,KAAKzC,SAAL,CAAeyC,WAAtB;AACD;;AACQ,MAAL5F,KAAK;AACP,WAAO,KAAKmD,SAAL,CAAenD,KAAtB;AACD;;AACW,MAAR6F,QAAQ;AACV,WAAO,KAAK1C,SAAL,CAAe0C,QAAtB;AACD;;AACa,MAAVxF,UAAU;AACZ,WAAO,KAAK8C,SAAL,CAAe9C,UAAtB;AACD;;AACM,MAAHyF,GAAG;AACL,WAAO,KAAK3C,SAAL,CAAe2C,GAAtB;AACD;;AACe,MAAJ7J,IAAI;AACd,WAAQ,KAAKkH,SAAL,CAAgClH,IAAxC;AACD;;AA1Mc,C,CACf;AACA;;;AACwBuG,gBAAW,IAAIuD,OAAJ,EAAX;AC9B1B;;;;;;;;;;;;;;;;;AAsCA,MAAMlK,SAAO,GAAuBC,GAAG,CAACD,OAAxC;;MAEamK,KAAI;AAMfxI,cAAqByI,GAArB,EAAuChI,QAAvC,EAAiE;AAA5C;;AACnB,QAAIA,QAAQ,CAACiI,aAAT,EAAJ,EAA8B;AAC5B,WAAK/C,SAAL,GAAiBlF,QAAQ,CAACkI,YAAT,EAAjB;AACA,WAAKC,kBAAL;AACA;AACD;;AAED,UAAM;AAAExJ;AAAF,QAAaqJ,GAAG,CAACI,OAAvB,CAP+D;;AAS/DxK,aAAO,CAACe,MAAD,EAAO;AAAA;AAAP,MAA4C;AACjDK,aAAO,EAAEgJ,GAAG,CAACpJ;AADoC,KAA5C,CAAPhB,CAT+D;;;AAc/DA,aAAO,CAACe,MAAD,EAAO;AAAA;AAAP,MAA4C;AACjDK,aAAO,EAAEgJ,GAAG,CAACpJ;AADoC,KAA5C,CAAPhB,CAd+D;;;AAmB/D,UAAM4D,QAAQ,GACZ,OAAOjE,MAAP,KAAkB,WAAlB,GAAgC+B,2BAAhC,GAA8DwC,SADhE;AAEA,SAAKoD,SAAL,GAAiBlF,QAAQ,CAACqI,UAAT,CAAoB;AACnCD,aAAO,EAAE;AACPnK,mBAAW,EAAEqK,yBAAyB,CAAC3J,MAAD,EAASqJ,GAAG,CAACpJ,IAAb,CAD/B;AAEP2J,6BAAqB,EAAE/G;AAFhB;AAD0B,KAApB,CAAjB;;AAOA,SAAK0D,SAAL,CAAesD,eAAf,CAA+B3K,GAAG,CAAC4K,aAAnC;;AACA,SAAKN,kBAAL;AACD;;AAEiB,MAAdO,cAAc;AAChB,WAAO,KAAKxD,SAAL,CAAewD,cAAtB;AACD;;AAEc,MAAXC,WAAW;AACb,QAAI,CAAC,KAAKzD,SAAL,CAAeyD,WAApB,EAAiC;AAC/B,aAAO,IAAP;AACD;;AAED,WAAOpE,IAAI,CAACC,WAAL,CAAiB,KAAKU,SAAL,CAAeyD,WAAhC,CAAP;AACD;;AACe,MAAZC,YAAY;AACd,WAAO,KAAK1D,SAAL,CAAe0D,YAAtB;AACD;;AACe,MAAZA,YAAY,CAACA,YAAD,EAA4B;AAC1C,SAAK1D,SAAL,CAAe0D,YAAf,GAA8BA,YAA9B;AACD;;AACW,MAARC,QAAQ;AACV,WAAO,KAAK3D,SAAL,CAAe2D,QAAtB;AACD;;AACW,MAARhH,QAAQ;AACV,WAAO,KAAKqD,SAAL,CAAerD,QAAtB;AACD;;AACW,MAARA,QAAQ,CAACiH,GAAD,EAAmB;AAC7B,SAAK5D,SAAL,CAAerD,QAAf,GAA0BiH,GAA1B;AACD;;AACDC,mBAAiB;AACf,SAAK7D,SAAL,CAAe6D,iBAAf;AACD;;AACDC,SAAO;AACL,WAAO,KAAK9D,SAAL,CAAe8D,OAAf,EAAP;AACD;;AACDC,aAAW,CAACC,GAAD,EAAcd,OAAd,EAAoD;AAC7DvK,OAAG,CAACsL,mBAAJ,CAAwB,KAAKjE,SAA7B,EAAwCgE,GAAxC,EAA6Cd,OAA7C;AACD;;AACDgB,iBAAe,CAAC9H,IAAD,EAAa;AAC1B,WAAOzD,GAAG,CAACuL,eAAJ,CAAoB,KAAKlE,SAAzB,EAAoC5D,IAApC,CAAP;AACD;;AAED+H,iBAAe,CAAC/H,IAAD,EAAa;AAC1B,WAAOzD,GAAG,CAACwL,eAAJ,CAAoB,KAAKnE,SAAzB,EAAoC5D,IAApC,CAAP;AACD;;AAEDgI,sBAAoB,CAAChI,IAAD,EAAe0F,WAAf,EAAkC;AACpD,WAAOnJ,GAAG,CAACyL,oBAAJ,CAAyB,KAAKpE,SAA9B,EAAyC5D,IAAzC,EAA+C0F,WAA/C,CAAP;AACD;;AAEmC,QAA9BuC,8BAA8B,CAClCxH,KADkC,EAElCyH,QAFkC,EAElB;AAEhB,WAAOzF,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAAC0L,8BAAJ,CAAmC,KAAKrE,SAAxC,EAAmDnD,KAAnD,EAA0DyH,QAA1D,CAFsB,CAAxB;AAID;;AACDC,wBAAsB,CAAC1H,KAAD,EAAc;AAClC,WAAO,KAAK2H,0BAAL,CAAgC3H,KAAhC,CAAP;AACD;;AACD2H,4BAA0B,CAAC3H,KAAD,EAAc;AACtC,WAAOlE,GAAG,CAAC6L,0BAAJ,CAA+B,KAAKxE,SAApC,EAA+CnD,KAA/C,CAAP;AACD;;AACD4H,uBAAqB,CAACC,SAAD,EAAkB;AACrC,WAAO/L,GAAG,CAAC8L,qBAAJ,CAA0B,KAAKzE,SAA/B,EAA0C0E,SAA1C,CAAP;AACD;;AACsB,QAAjBC,iBAAiB;AACrBjM,aAAO,CACLjB,yBAAyB,EADpB,EAEL,KAAKuI,SAFA,EAES;AAAA;AAFT,KAAPtH;;AAKA,UAAM+D,UAAU,GAAG,MAAM9D,GAAG,CAACgM,iBAAJ,CACvB,KAAK3E,SADkB,EAEvB5F,2BAFuB,CAAzB;;AAIA,QAAI,CAACqC,UAAL,EAAiB;AACf,aAAO;AACLA,kBAAU,EAAE,IADP;AAELyC,YAAI,EAAE;AAFD,OAAP;AAID;;AACD,WAAOL,iBAAiB,CAAC,KAAKmB,SAAN,EAAiBlI,OAAO,CAACC,OAAR,CAAgB0E,UAAhB,CAAjB,CAAxB;AACD,GAxHc;;;;;AA6HfmI,wBAAsB,CAACC,SAAD,EAAkB;AACtClM,OAAG,CAACiM,sBAAJ,CAA2B,KAAK5E,SAAhC,EAA2C6E,SAA3C;AACD;;AAEDC,oBAAkB,CAChBC,cADgB,EAEhBC,OAFgB,EAGhBC,SAHgB,EAGO;AAEvB,UAAM;AAAEC,UAAF;AAAQC,WAAR;AAAeC;AAAf,QAA4BC,aAAa,CAC7CN,cAD6C,EAE7CC,OAF6C,EAG7CC,SAH6C,CAA/C;AAKA,WAAO,KAAKjF,SAAL,CAAe8E,kBAAf,CAAkCI,IAAlC,EAAyCC,KAAzC,EAAgDC,QAAhD,CAAP;AACD;;AACDE,kBAAgB,CACdP,cADc,EAEdC,OAFc,EAGdC,SAHc,EAGS;AAEvB,UAAM;AAAEC,UAAF;AAAQC,WAAR;AAAeC;AAAf,QAA4BC,aAAa,CAC7CN,cAD6C,EAE7CC,OAF6C,EAG7CC,SAH6C,CAA/C;AAKA,WAAO,KAAKjF,SAAL,CAAesF,gBAAf,CAAgCJ,IAAhC,EAAuCC,KAAvC,EAA8CC,QAA9C,CAAP;AACD;;AACDG,uBAAqB,CACnB1I,KADmB,EAEnB4E,kBAFmB,EAE0B;AAE7C,WAAO9I,GAAG,CAAC4M,qBAAJ,CAA0B,KAAKvF,SAA/B,EAA0CnD,KAA1C,EAAiD4E,kBAAjD,CAAP;AACD;;AACD+D,wBAAsB,CACpB3I,KADoB,EAEpB4E,kBAFoB,EAEiC;AAErD,WAAO9I,GAAG,CAAC6M,sBAAJ,CACL,KAAKxF,SADA,EAELnD,KAFK,EAGL4E,kBAAkB,IAAI7E,SAHjB,CAAP;AAKD;;AACmB,QAAd6I,cAAc,CAAC1M,WAAD,EAAoB;AACtCF,gCAA4B,CAAC,KAAKmH,SAAN,EAAiBjH,WAAjB,CAA5B;;AACA,QAAI2M,SAAJ;;AACA,YAAQ3M,WAAR;AACE,WAAKT,WAAW,CAACG,OAAjB;AACEiN,iBAAS,GAAG/M,GAAG,CAACuB,yBAAhB;AACA;;AACF,WAAK5B,WAAW,CAACC,KAAjB;;AAEE,cAAMoN,yBAAyB,GAAG,MAAMhN,GAAG,CACxC2B,YADqC,CACC3B,GAAG,CAACsB,yBADL,EAErC2L,YAFqC,EAAxC;AAGAF,iBAAS,GAAGC,yBAAyB,GACjChN,GAAG,CAACsB,yBAD6B,GAEjCtB,GAAG,CAACkN,uBAFR;AAGA;;AACF,WAAKvN,WAAW,CAACE,IAAjB;AACEkN,iBAAS,GAAG/M,GAAG,CAACqB,mBAAhB;AACA;;AACF;AACE,eAAOrB,GAAG,CAACmN,KAAJ,CAAS;AAAA;AAAT,UAA4C;AACjDhM,iBAAO,EAAE,KAAKkG,SAAL,CAAetG;AADyB,SAA5C,CAAP;AAjBJ;;AAsBA,WAAO,KAAKsG,SAAL,CAAeyF,cAAf,CAA8BC,SAA9B,CAAP;AACD;;AAEDK,qCAAmC,CACjCtJ,UADiC,EACA;AAEjC,WAAO,KAAKuJ,oBAAL,CAA0BvJ,UAA1B,CAAP;AACD;;AACDwJ,mBAAiB;AACf,WAAOpH,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAACsN,iBAAJ,CAAsB,KAAKjG,SAA3B,CAFsB,CAAxB;AAID;;AACDgG,sBAAoB,CAClBvJ,UADkB,EACe;AAEjC,WAAOoC,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAACqN,oBAAJ,CAAyB,KAAKhG,SAA9B,EAAyCvD,UAAzC,CAFsB,CAAxB;AAID;;AACDyJ,uBAAqB,CAACC,KAAD,EAAc;AACjC,WAAOtH,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAACuN,qBAAJ,CAA0B,KAAKlG,SAA/B,EAA0CmG,KAA1C,CAFsB,CAAxB;AAID;;AACDC,4BAA0B,CACxBvJ,KADwB,EAExByH,QAFwB,EAER;AAEhB,WAAOzF,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAACyN,0BAAJ,CAA+B,KAAKpG,SAApC,EAA+CnD,KAA/C,EAAsDyH,QAAtD,CAFsB,CAAxB;AAID;;AACD+B,qBAAmB,CACjBxJ,KADiB,EAEjB6H,SAFiB,EAEC;AAElB,WAAO7F,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAAC0N,mBAAJ,CAAwB,KAAKrG,SAA7B,EAAwCnD,KAAxC,EAA+C6H,SAA/C,CAFsB,CAAxB;AAID;;AACD4B,uBAAqB,CACnBxJ,WADmB,EAEnBiE,mBAFmB,EAE4B;AAE/C,WAAOxB,yBAAyB,CAC9B,KAAKS,SADyB,EAE9BrH,GAAG,CAAC2N,qBAAJ,CACE,KAAKtG,SADP,EAEElD,WAFF,EAGEiE,mBAHF,CAF8B,CAAhC;AAQD;;AACoB,QAAfwF,eAAe,CACnBzL,QADmB,EACU;AAE7BpC,aAAO,CACLjB,yBAAyB,EADpB,EAEL,KAAKuI,SAFA,EAES;AAAA;AAFT,KAAPtH;;AAKA,WAAOmG,iBAAiB,CACtB,KAAKmB,SADiB,EAEtBrH,GAAG,CAAC4N,eAAJ,CACE,KAAKvG,SADP,EAEElF,QAFF,EAGEV,2BAHF,CAFsB,CAAxB;AAQD;;AACuB,QAAlBoM,kBAAkB,CAAC1L,QAAD,EAA8B;AACpDpC,aAAO,CACLjB,yBAAyB,EADpB,EAEL,KAAKuI,SAFA,EAES;AAAA;AAFT,KAAPtH;;AAMA,UAAMS,2BAA2B,CAAC,KAAK6G,SAAN,CAAjC;AACA,WAAOrH,GAAG,CAAC6N,kBAAJ,CACL,KAAKxG,SADA,EAELlF,QAFK,EAGLV,2BAHK,CAAP;AAKD;;AACDqM,mBAAiB,CAACvH,IAAD,EAAyB;;;AAGxC,WAAO,KAAKc,SAAL,CAAeyG,iBAAf,CAAiCvH,IAAjC,CAAP;AACD;;AACDwH,yBAAuB,CAACtK,IAAD,EAAa;AAClC,WAAOzD,GAAG,CAAC+N,uBAAJ,CAA4B,KAAK1G,SAAjC,EAA4C5D,IAA5C,CAAP;AACD;;AACDV,QAAM;AACJ,WAAO,KAAKsE,SAAZ;AACD;;AACD2G,SAAO;AACL,WAAO,KAAK3G,SAAL,CAAe2G,OAAf,EAAP;AACD;;AACO1D,oBAAkB;AACvB,SAAKjD,SAAL,CAAmDpE,OAAnD,GAA6D,MAAM,IAAnE;AACF;;AA5Sc;;AAGRiH,mBAAcvK,WAAd;;AA4ST,SAAS+M,aAAT,CACEN,cADF,EAEEI,KAFF,EAGEC,QAHF,EAGwB;AAEtB,MAAIF,IAAI,GAAGH,cAAX;;AACA,MAAI,OAAOA,cAAP,KAA0B,UAA9B,EAA0C;AACxC,KAAC;AAAEG,UAAF;AAAQC,WAAR;AAAeC;AAAf,QAA4BL,cAA7B;AACD,GALqB;;;AAQtB,QAAM6B,OAAO,GAAG1B,IAAhB;;AAEA,QAAM2B,OAAO,GAAI3H,IAAD,IACd0H,OAAO,CAAC1H,IAAI,IAAIG,IAAI,CAACC,WAAL,CAAiBJ,IAAjB,CAAT,CADT;;AAEA,SAAO;AACLgG,QAAI,EAAE2B,OADD;AAEL1B,SAAK,EAAEA,KAFF;AAGLC;AAHK,GAAP;AAKD;;AAED,SAAShC,yBAAT,CACE3J,MADF,EAEEK,OAFF,EAEiB;;;;;AAMf,QAAMgN,YAAY,GAAGjN,4BAA4B,CAACJ,MAAD,EAASK,OAAT,CAAjD,CANe;;;AASf,MACE,OAAO9C,IAAP,KAAgB,WAAhB,IACA,CAAC8P,YAAY,CAAC5N,QAAb,CAAsBP,GAAG,CAACsB,yBAA1B,CAFH,EAGE;AACA6M,gBAAY,CAACC,IAAb,CAAkBpO,GAAG,CAACsB,yBAAtB;AACD,GAdc;;;AAiBf,MAAI,OAAO5B,MAAP,KAAkB,WAAtB,EAAmC;AACjC,SAAK,MAAMU,WAAX,IAA0B,CACxBJ,GAAG,CAACkN,uBADoB,EAExBlN,GAAG,CAACuB,yBAFoB,CAA1B,EAGG;AACD,UAAI,CAAC4M,YAAY,CAAC5N,QAAb,CAAsBH,WAAtB,CAAL,EAAyC;AACvC+N,oBAAY,CAACC,IAAb,CAAkBhO,WAAlB;AACD;AACF;AACF,GA1Bc;;;AA6Bf,MAAI,CAAC+N,YAAY,CAAC5N,QAAb,CAAsBP,GAAG,CAACqB,mBAA1B,CAAL,EAAqD;AACnD8M,gBAAY,CAACC,IAAb,CAAkBpO,GAAG,CAACqB,mBAAtB;AACD;;AAED,SAAO8M,YAAP;AACF;ACjZA;;;;;;;;;;;;;;;;;;MAuBa9J,kBAAiB;AAgB5B3C;AAbA,sBAAa,OAAb,CAaA;;;AAGE,SAAK2F,SAAL,GAAiB,IAAIrH,GAAG,CAACqE,iBAAR,CAA0BtB,MAAM,CAACsL,QAAQ,CAAClO,IAAT,EAAD,CAAhC,CAAjB;AACD;;AAXgB,SAAV2D,UAAU,CACfiD,cADe,EAEfE,gBAFe,EAES;AAExB,WAAOjH,GAAG,CAACqE,iBAAJ,CAAsBP,UAAtB,CAAiCiD,cAAjC,EAAiDE,gBAAjD,CAAP;AACD;;AAQDqH,mBAAiB,CACfC,gBADe,EAMfnG,mBANe,EAMgC;AAE/C,WAAO,KAAKf,SAAL,CAAeiH,iBAAf;;AAGLC,oBAHK,EAILnG,mBAJK,CAAP;AAMD;;AAEDrF,QAAM;AACJ,WAAO,KAAKsE,SAAZ;AACD;;AAxC2B;;AAMrBhD,yCAAuBrE,GAAG,CAACqE,iBAAJ,CAAsBmK,oBAA7C;AACAnK,gCAAcrE,GAAG,CAACqE,iBAAJ,CAAsBoK,WAApC;AC9BT;;;;;;;;;;;;;;;;;AAsBA,MAAM1O,OAAO,GAAuBC,GAAG,CAACD,OAAxC;;MAEa2O,kBAAiB;AAK5BhN,cACEiN,SADF,EAEEC,UAFF,EAGmC;AAAA,QAAjCzE,GAAiC,uEAAdkE,QAAQ,CAAClE,GAAT,EAAc;;WAAA;;;AAGjCpK,WAAO,CAAC,SAAG,CAACwK,OAAJ,MAAW,IAAX,IAAWrN,aAAX,GAAW,MAAX,GAAWA,GAAE4D,MAAd,EAAoB;AAAA;AAApB,MAAyD;AAC9DK,aAAO,EAAEgJ,GAAG,CAACpJ;AADiD,KAAzD,CAAP;;AAGA,SAAKsG,SAAL,GAAiB,IAAIrH,GAAG,CAAC0O,iBAAR,CACfC,SADe;AAGfC,cAHe;;AAOfzE,OAAG,CAAChK,IAAJ,EAPe,CAAjB;AASA,SAAK0O,IAAL,GAAY,KAAKxH,SAAL,CAAewH,IAA3B;AACD;;AACDC,OAAK;AACH,SAAKzH,SAAL,CAAeyH,KAAf;AACD;;AACDC,QAAM;AACJ,WAAO,KAAK1H,SAAL,CAAe0H,MAAf,EAAP;AACD;;AACDC,QAAM;AACJ,WAAO,KAAK3H,SAAL,CAAe2H,MAAf,EAAP;AACD;;AAjC2B;ACxB9B;;;;;;;;;;;;;;;;;;AAkCA,MAAMC,SAAS,GAAG,aAAlB,C,CAqCA;AACA;;AACA,SAASC,kBAAT,CAA4BC,QAA5B,EAAwD;AACtDA,UAAQ,CAACC,QAAT,CAAkBC,iBAAlB,CACE,IAAIC,SAAJ,CACEL,SADF,EAEEN,SAAS;;AAEP,UAAMxE,GAAG,GAAGwE,SAAS,CAACY,WAAV,CAAsB,YAAtB,EAAoClF,YAApC,EAAZ;AACA,UAAMmF,YAAY,GAAGb,SAAS,CAACY,WAAV,CAAsB,MAAtB,CAArB;AACA,WAAO,IAAIrF,IAAJ,CAASC,GAAT,EAAcqF,YAAd,CAAP;AACD,GAPH,EAOG;AAAA;AAPH,IAUGC,eAVH,CAUmB;AACfC,kBAAc,EAAE;AACdC,eAAS,EAAE;AACTC,oBAAY,EAAEpR,GAAI,CAACqR,mBAALrR,CAAyBoR,YAD9B;AAETE,sBAAc,EAAEtR,GAAI,CAACqR,mBAALrR,CAAyBsR,cAFhC;AAGTC,qBAAa,EAAEvR,GAAI,CAACqR,mBAALrR,CAAyBuR,aAH/B;AAITC,qCAA6B,EAC3BxR,GAAI,CAACqR,mBAALrR,CAAyBwR,6BALlB;AAMTC,+BAAuB,EACrBzR,GAAI,CAACqR,mBAALrR,CAAyByR,uBAPlB;AAQTC,oBAAY,EAAE1R,GAAI,CAACqR,mBAALrR,CAAyB0R;AAR9B;AADG,KADD;AAafC,qBAAiB,EAAE3R,GAAI,CAAC2R,iBAbT;AAcftL,wBAAoB,EAAErG,GAAI,CAACqG,oBAdZ;AAefE,sBAAkB,EAAEvG,GAAI,CAACuG,kBAfV;AAgBfJ,sBAAkB,EAAEnG,GAAI,CAACmG,kBAhBV;AAiBfoB,iBAAa,EAAEvH,GAAI,CAACuH,aAjBL;AAkBfqK,oBAAgB,EAAE5R,GAAI,CAAC4R,gBAlBR;AAmBf/L,qBAAiB,EAAEgM,iBAnBJ;AAoBfC,6BAAyB,EAAE9R,GAAI,CAAC8R,yBApBjB;AAqBf5B,qBAAiB,EAAE6B,iBArBJ;AAsBftL,uBAAmB,EAAEzG,GAAI,CAACyG,mBAtBX;AAuBfiF,QAvBe;AAwBfsG,kBAAc,EAAEhS,GAAI,CAACgS,cAxBN;AAyBfC,SAAK,EAAErM;AAzBQ,GAVnB,EAqCGsM,oBArCH,CAqCuB;AAAA;AArCvB,IAsCGC,oBAtCH,CAsCwB,KAtCxB,CADF;AA0CAxB,UAAQ,CAACyB,eAAT,CAAyB7P,IAAzB,EAA+B8P,OAA/B;AACD;;AAED3B,kBAAkB,CAACb,QAAD,CAAlB","names":["CORDOVA_ONDEVICEREADY_TIMEOUT_MS","_getCurrentScheme","location","_a","protocol","_isHttpOrHttps","_isAndroidOrIosCordovaScheme","ua","getUA","toLowerCase","match","_isNativeEnvironment","isReactNative","isNode","_isIe11","isIE","documentMode","_isEdge","test","_isLocalStorageNotSynchronized","_isWebStorageSupported","storage","self","localStorage","key","impl","_generateEventId","isIndexedDBAvailable","e","_isWorker","global","_isPopupRedirectSupported","isBrowserExtension","_isLikelyCordova","document","_isCordova","Promise","resolve","timeoutId","setTimeout","addEventListener","clearTimeout","_getSelfWindow","window","Persistence","LOCAL","NONE","SESSION","_assert","exp","PERSISTENCE_KEY","_validatePersistenceArgument","auth","persistence","Object","values","includes","_savePersistenceForRedirect","_initializationPromise","session","getSessionStorageIfAvailable","_persistenceKeyName","config","apiKey","name","setItem","_getPersistence","_getPersistencesFromRedirect","appName","getItem","inMemoryPersistence","indexedDBLocalPersistence","browserSessionPersistence","sessionStorage","CompatPopupRedirectResolver","constructor","_getInstance","browserPopupRedirectResolver","cordovaPopupRedirectResolver","_getRedirectResult","_initialize","selectUnderlyingResolver","assertedUnderlyingResolver","_openPopup","provider","authType","eventId","_openRedirect","_isIframeWebStorageSupported","cb","_originValidation","_shouldInitProactively","browserResolver","underlyingResolver","isCordova","cordovaResolver","unwrap","object","wrapped","credentialFromResponse","userCredential","credentialFromObject","attachExtraErrorFields","response","customData","_tokenResponse","code","mfaErr","resolver","MultiFactorResolver","getMultiFactorResolver","credential","credErr","tenantId","undefined","email","phoneNumber","FirebaseError","PhoneAuthProvider","credentialFromResult","providerId","ProviderId","PASSWORD","GOOGLE","GoogleAuthProvider","FACEBOOK","FacebookAuthProvider","GITHUB","GithubAuthProvider","TWITTER","TwitterAuthProvider","oauthIdToken","oauthAccessToken","oauthTokenSecret","pendingToken","nonce","startsWith","SAMLAuthCredential","_create","OAuthCredential","_fromParams","signInMethod","idToken","accessToken","OAuthProvider","rawNonce","credentialFromError","convertCredential","credentialPromise","catch","then","operationType","user","additionalUserInfo","getAdditionalUserInfo","User","getOrCreate","convertConfirmationResult","confirmationResultPromise","confirmationResultExp","verificationId","confirm","verificationCode","hints","resolveSignIn","assertion","_delegate","multiFactor","USER_MAP","has","set","get","delete","reload","toJSON","getIdTokenResult","forceRefresh","getIdToken","linkAndRetrieveDataWithCredential","linkWithCredential","linkWithPhoneNumber","applicationVerifier","linkWithPopup","linkWithRedirect","_castAuth","reauthenticateAndRetrieveDataWithCredential","reauthenticateWithCredential","reauthenticateWithPhoneNumber","reauthenticateWithPopup","reauthenticateWithRedirect","sendEmailVerification","actionCodeSettings","unlink","updateEmail","newEmail","updatePassword","newPassword","updatePhoneNumber","phoneCredential","updateProfile","profile","verifyBeforeUpdateEmail","emailVerified","isAnonymous","metadata","providerData","refreshToken","displayName","photoURL","uid","WeakMap","Auth","app","isInitialized","getImmediate","linkUnderlyingAuth","options","initialize","buildPersistenceHierarchy","popupRedirectResolver","_updateErrorMap","debugErrorMap","emulatorConfig","currentUser","languageCode","settings","tid","useDeviceLanguage","signOut","useEmulator","url","connectAuthEmulator","applyActionCode","checkActionCode","confirmPasswordReset","createUserWithEmailAndPassword","password","fetchProvidersForEmail","fetchSignInMethodsForEmail","isSignInWithEmailLink","emailLink","getRedirectResult","addFrameworkForLogging","framework","onAuthStateChanged","nextOrObserver","errorFn","completed","next","error","complete","wrapObservers","onIdTokenChanged","sendSignInLinkToEmail","sendPasswordResetEmail","setPersistence","converted","isIndexedDBFullySupported","_isAvailable","browserLocalPersistence","_fail","signInAndRetrieveDataWithCredential","signInWithCredential","signInAnonymously","signInWithCustomToken","token","signInWithEmailAndPassword","signInWithEmailLink","signInWithPhoneNumber","signInWithPopup","signInWithRedirect","updateCurrentUser","verifyPasswordResetCode","_delete","oldNext","newNext","persistences","push","firebase","verifyPhoneNumber","phoneInfoOptions","PHONE_SIGN_IN_METHOD","PROVIDER_ID","RecaptchaVerifier","container","parameters","type","clear","render","verify","AUTH_TYPE","registerAuthCompat","instance","INTERNAL","registerComponent","Component","getProvider","authProvider","setServiceProps","ActionCodeInfo","Operation","EMAIL_SIGNIN","ActionCodeOperation","PASSWORD_RESET","RECOVER_EMAIL","REVERT_SECOND_FACTOR_ADDITION","VERIFY_AND_CHANGE_EMAIL","VERIFY_EMAIL","EmailAuthProvider","SAMLAuthProvider","CompatAuthProvider","PhoneMultiFactorGenerator","CompatRecaptchaVerifier","AuthCredential","Error","setInstantiationMode","setMultipleInstances","registerVersion","version"],"sources":["/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/platform.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/persistence.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/popup_redirect.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/wrap.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/user_credential.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/user.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/auth.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/phone_auth_provider.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/src/recaptcha_verifier.ts","/Users/rim.sh/Desktop/term4/4537ISA/project/ISAproject/node_modules/@firebase/auth-compat/index.ts"],"sourcesContent":["/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as impl from '@firebase/auth/internal';\nimport {\n  getUA,\n  isBrowserExtension,\n  isReactNative,\n  isNode,\n  isIE,\n  isIndexedDBAvailable\n} from '@firebase/util';\n\ndeclare global {\n  interface Document {\n    documentMode?: number;\n  }\n}\n\nconst CORDOVA_ONDEVICEREADY_TIMEOUT_MS = 1000;\n\nfunction _getCurrentScheme(): string | null {\n  return self?.location?.protocol || null;\n}\n\n/**\n * @return {boolean} Whether the current environment is http or https.\n */\nfunction _isHttpOrHttps(): boolean {\n  return _getCurrentScheme() === 'http:' || _getCurrentScheme() === 'https:';\n}\n\n/**\n * @param {?string=} ua The user agent.\n * @return {boolean} Whether the app is rendered in a mobile iOS or Android\n *     Cordova environment.\n */\nexport function _isAndroidOrIosCordovaScheme(ua: string = getUA()): boolean {\n  return !!(\n    (_getCurrentScheme() === 'file:' || _getCurrentScheme() === 'ionic:') &&\n    ua.toLowerCase().match(/iphone|ipad|ipod|android/)\n  );\n}\n\n/**\n * @return {boolean} Whether the environment is a native environment, where\n *     CORS checks do not apply.\n */\nfunction _isNativeEnvironment(): boolean {\n  return isReactNative() || isNode();\n}\n\n/**\n * Checks whether the user agent is IE11.\n * @return {boolean} True if it is IE11.\n */\nfunction _isIe11(): boolean {\n  return isIE() && document?.documentMode === 11;\n}\n\n/**\n * Checks whether the user agent is Edge.\n * @param {string} userAgent The browser user agent string.\n * @return {boolean} True if it is Edge.\n */\nfunction _isEdge(ua: string = getUA()): boolean {\n  return /Edge\\/\\d+/.test(ua);\n}\n\n/**\n * @param {?string=} opt_userAgent The navigator user agent.\n * @return {boolean} Whether local storage is not synchronized between an iframe\n *     and a popup of the same domain.\n */\nfunction _isLocalStorageNotSynchronized(ua: string = getUA()): boolean {\n  return _isIe11() || _isEdge(ua);\n}\n\n/** @return {boolean} Whether web storage is supported. */\nexport function _isWebStorageSupported(): boolean {\n  try {\n    const storage = self.localStorage;\n    const key = impl._generateEventId();\n    if (storage) {\n      // setItem will throw an exception if we cannot access WebStorage (e.g.,\n      // Safari in private mode).\n      storage['setItem'](key, '1');\n      storage['removeItem'](key);\n      // For browsers where iframe web storage does not synchronize with a popup\n      // of the same domain, indexedDB is used for persistent storage. These\n      // browsers include IE11 and Edge.\n      // Make sure it is supported (IE11 and Edge private mode does not support\n      // that).\n      if (_isLocalStorageNotSynchronized()) {\n        // In such browsers, if indexedDB is not supported, an iframe cannot be\n        // notified of the popup sign in result.\n        return isIndexedDBAvailable();\n      }\n      return true;\n    }\n  } catch (e) {\n    // localStorage is not available from a worker. Test availability of\n    // indexedDB.\n    return _isWorker() && isIndexedDBAvailable();\n  }\n  return false;\n}\n\n/**\n * @param {?Object=} global The optional global scope.\n * @return {boolean} Whether current environment is a worker.\n */\nexport function _isWorker(): boolean {\n  // WorkerGlobalScope only defined in worker environment.\n  return (\n    typeof global !== 'undefined' &&\n    'WorkerGlobalScope' in global &&\n    'importScripts' in global\n  );\n}\n\nexport function _isPopupRedirectSupported(): boolean {\n  return (\n    (_isHttpOrHttps() ||\n      isBrowserExtension() ||\n      _isAndroidOrIosCordovaScheme()) &&\n    // React Native with remote debugging reports its location.protocol as\n    // http.\n    !_isNativeEnvironment() &&\n    // Local storage has to be supported for browser popup and redirect\n    // operations to work.\n    _isWebStorageSupported() &&\n    // DOM, popups and redirects are not supported within a worker.\n    !_isWorker()\n  );\n}\n\n/** Quick check that indicates the platform *may* be Cordova */\nexport function _isLikelyCordova(): boolean {\n  return _isAndroidOrIosCordovaScheme() && typeof document !== 'undefined';\n}\n\nexport async function _isCordova(): Promise<boolean> {\n  if (!_isLikelyCordova()) {\n    return false;\n  }\n\n  return new Promise(resolve => {\n    const timeoutId = setTimeout(() => {\n      // We've waited long enough; the telltale Cordova event didn't happen\n      resolve(false);\n    }, CORDOVA_ONDEVICEREADY_TIMEOUT_MS);\n\n    document.addEventListener('deviceready', () => {\n      clearTimeout(timeoutId);\n      resolve(true);\n    });\n  });\n}\n\nexport function _getSelfWindow(): Window | null {\n  return typeof window !== 'undefined' ? window : null;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport { isIndexedDBAvailable, isNode, isReactNative } from '@firebase/util';\nimport { _getSelfWindow, _isWebStorageSupported, _isWorker } from './platform';\n\nexport const Persistence = {\n  LOCAL: 'local',\n  NONE: 'none',\n  SESSION: 'session'\n};\n\nconst _assert: typeof exp._assert = exp._assert;\n\nconst PERSISTENCE_KEY = 'persistence';\n\n/**\n * Validates that an argument is a valid persistence value. If an invalid type\n * is specified, an error is thrown synchronously.\n */\nexport function _validatePersistenceArgument(\n  auth: exp.Auth,\n  persistence: string\n): void {\n  _assert(\n    Object.values(Persistence).includes(persistence),\n    auth,\n    exp.AuthErrorCode.INVALID_PERSISTENCE\n  );\n  // Validate if the specified type is supported in the current environment.\n  if (isReactNative()) {\n    // This is only supported in a browser.\n    _assert(\n      persistence !== Persistence.SESSION,\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  if (isNode()) {\n    // Only none is supported in Node.js.\n    _assert(\n      persistence === Persistence.NONE,\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  if (_isWorker()) {\n    // In a worker environment, either LOCAL or NONE are supported.\n    // If indexedDB not supported and LOCAL provided, throw an error\n    _assert(\n      persistence === Persistence.NONE ||\n        (persistence === Persistence.LOCAL && isIndexedDBAvailable()),\n      auth,\n      exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n    );\n    return;\n  }\n  // This is restricted by what the browser supports.\n  _assert(\n    persistence === Persistence.NONE || _isWebStorageSupported(),\n    auth,\n    exp.AuthErrorCode.UNSUPPORTED_PERSISTENCE\n  );\n}\n\nexport async function _savePersistenceForRedirect(\n  auth: exp.AuthInternal\n): Promise<void> {\n  await auth._initializationPromise;\n  const session = getSessionStorageIfAvailable();\n  const key = exp._persistenceKeyName(\n    PERSISTENCE_KEY,\n    auth.config.apiKey,\n    auth.name\n  );\n  if (session) {\n    session.setItem(key, auth._getPersistence());\n  }\n}\n\nexport function _getPersistencesFromRedirect(\n  apiKey: string,\n  appName: string\n): exp.Persistence[] {\n  const session = getSessionStorageIfAvailable();\n  if (!session) {\n    return [];\n  }\n\n  const key = exp._persistenceKeyName(PERSISTENCE_KEY, apiKey, appName);\n  const persistence = session.getItem(key);\n\n  switch (persistence) {\n    case Persistence.NONE:\n      return [exp.inMemoryPersistence];\n    case Persistence.LOCAL:\n      return [exp.indexedDBLocalPersistence, exp.browserSessionPersistence];\n    case Persistence.SESSION:\n      return [exp.browserSessionPersistence];\n    default:\n      return [];\n  }\n}\n\n/** Returns session storage, or null if the property access errors */\nfunction getSessionStorageIfAvailable(): Storage | null {\n  try {\n    return _getSelfWindow()?.sessionStorage || null;\n  } catch (e) {\n    return null;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport { _isCordova, _isLikelyCordova } from './platform';\n\nconst _assert: typeof exp._assert = exp._assert;\n\n/** Platform-agnostic popup-redirect resolver */\nexport class CompatPopupRedirectResolver\n  implements exp.PopupRedirectResolverInternal\n{\n  // Create both resolvers for dynamic resolution later\n  private readonly browserResolver: exp.PopupRedirectResolverInternal =\n    exp._getInstance(exp.browserPopupRedirectResolver);\n  private readonly cordovaResolver: exp.PopupRedirectResolverInternal =\n    exp._getInstance(exp.cordovaPopupRedirectResolver);\n  // The actual resolver in use: either browserResolver or cordovaResolver.\n  private underlyingResolver: exp.PopupRedirectResolverInternal | null = null;\n  _redirectPersistence = exp.browserSessionPersistence;\n\n  _completeRedirectFn: (\n    auth: exp.Auth,\n    resolver: exp.PopupRedirectResolver,\n    bypassAuthState: boolean\n  ) => Promise<exp.UserCredential | null> = exp._getRedirectResult;\n\n  async _initialize(auth: exp.AuthImpl): Promise<exp.EventManager> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._initialize(auth);\n  }\n\n  async _openPopup(\n    auth: exp.AuthImpl,\n    provider: exp.AuthProvider,\n    authType: exp.AuthEventType,\n    eventId?: string\n  ): Promise<exp.AuthPopup> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openPopup(\n      auth,\n      provider,\n      authType,\n      eventId\n    );\n  }\n\n  async _openRedirect(\n    auth: exp.AuthImpl,\n    provider: exp.AuthProvider,\n    authType: exp.AuthEventType,\n    eventId?: string\n  ): Promise<void> {\n    await this.selectUnderlyingResolver();\n    return this.assertedUnderlyingResolver._openRedirect(\n      auth,\n      provider,\n      authType,\n      eventId\n    );\n  }\n\n  _isIframeWebStorageSupported(\n    auth: exp.AuthImpl,\n    cb: (support: boolean) => unknown\n  ): void {\n    this.assertedUnderlyingResolver._isIframeWebStorageSupported(auth, cb);\n  }\n\n  _originValidation(auth: exp.Auth): Promise<void> {\n    return this.assertedUnderlyingResolver._originValidation(auth);\n  }\n\n  get _shouldInitProactively(): boolean {\n    return _isLikelyCordova() || this.browserResolver._shouldInitProactively;\n  }\n\n  private get assertedUnderlyingResolver(): exp.PopupRedirectResolverInternal {\n    _assert(this.underlyingResolver, exp.AuthErrorCode.INTERNAL_ERROR);\n    return this.underlyingResolver;\n  }\n\n  private async selectUnderlyingResolver(): Promise<void> {\n    if (this.underlyingResolver) {\n      return;\n    }\n\n    // We haven't yet determined whether or not we're in Cordova; go ahead\n    // and determine that state now.\n    const isCordova = await _isCordova();\n    this.underlyingResolver = isCordova\n      ? this.cordovaResolver\n      : this.browserResolver;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/** Forward direction wrapper from Compat --unwrap-> Exp */\nexport interface Wrapper<T> {\n  unwrap(): T;\n}\n\n/** Reverse direction wrapper from Exp --wrapped--> Compat */\nexport interface ReverseWrapper<T> {\n  wrapped(): T;\n}\n\nexport function unwrap<T>(object: unknown): T {\n  return (object as Wrapper<T>).unwrap();\n}\n\nexport function wrapped<T>(object: unknown): T {\n  return (object as ReverseWrapper<T>).wrapped();\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { FirebaseError } from '@firebase/util';\nimport { Auth } from './auth';\nimport { User } from './user';\nimport { unwrap, wrapped } from './wrap';\n\nfunction credentialFromResponse(\n  userCredential: exp.UserCredentialInternal\n): exp.AuthCredential | null {\n  return credentialFromObject(userCredential);\n}\n\nfunction attachExtraErrorFields(auth: exp.Auth, e: FirebaseError): void {\n  // The response contains all fields from the server which may or may not\n  // actually match the underlying type\n  const response = (e.customData as exp.TaggedWithTokenResponse | undefined)\n    ?._tokenResponse as unknown as Record<string, string>;\n  if (e.code === 'auth/multi-factor-auth-required') {\n    const mfaErr = e as compat.MultiFactorError;\n    mfaErr.resolver = new MultiFactorResolver(\n      auth,\n      exp.getMultiFactorResolver(auth, e as exp.MultiFactorError)\n    );\n  } else if (response) {\n    const credential = credentialFromObject(e);\n    const credErr = e as compat.AuthError;\n    if (credential) {\n      credErr.credential = credential;\n      credErr.tenantId = response.tenantId || undefined;\n      credErr.email = response.email || undefined;\n      credErr.phoneNumber = response.phoneNumber || undefined;\n    }\n  }\n}\n\nfunction credentialFromObject(\n  object: FirebaseError | exp.UserCredential\n): exp.AuthCredential | null {\n  const { _tokenResponse } = (\n    object instanceof FirebaseError ? object.customData : object\n  ) as exp.TaggedWithTokenResponse;\n  if (!_tokenResponse) {\n    return null;\n  }\n\n  // Handle phone Auth credential responses, as they have a different format\n  // from other backend responses (i.e. no providerId). This is also only the\n  // case for user credentials (does not work for errors).\n  if (!(object instanceof FirebaseError)) {\n    if ('temporaryProof' in _tokenResponse && 'phoneNumber' in _tokenResponse) {\n      return exp.PhoneAuthProvider.credentialFromResult(object);\n    }\n  }\n\n  const providerId = _tokenResponse.providerId;\n\n  // Email and password is not supported as there is no situation where the\n  // server would return the password to the client.\n  if (!providerId || providerId === exp.ProviderId.PASSWORD) {\n    return null;\n  }\n\n  let provider: Pick<\n    typeof exp.OAuthProvider,\n    'credentialFromResult' | 'credentialFromError'\n  >;\n  switch (providerId) {\n    case exp.ProviderId.GOOGLE:\n      provider = exp.GoogleAuthProvider;\n      break;\n    case exp.ProviderId.FACEBOOK:\n      provider = exp.FacebookAuthProvider;\n      break;\n    case exp.ProviderId.GITHUB:\n      provider = exp.GithubAuthProvider;\n      break;\n    case exp.ProviderId.TWITTER:\n      provider = exp.TwitterAuthProvider;\n      break;\n    default:\n      const {\n        oauthIdToken,\n        oauthAccessToken,\n        oauthTokenSecret,\n        pendingToken,\n        nonce\n      } = _tokenResponse as exp.SignInWithIdpResponse;\n      if (\n        !oauthAccessToken &&\n        !oauthTokenSecret &&\n        !oauthIdToken &&\n        !pendingToken\n      ) {\n        return null;\n      }\n      // TODO(avolkovi): uncomment this and get it working with SAML & OIDC\n      if (pendingToken) {\n        if (providerId.startsWith('saml.')) {\n          return exp.SAMLAuthCredential._create(providerId, pendingToken);\n        } else {\n          // OIDC and non-default providers excluding Twitter.\n          return exp.OAuthCredential._fromParams({\n            providerId,\n            signInMethod: providerId,\n            pendingToken,\n            idToken: oauthIdToken,\n            accessToken: oauthAccessToken\n          });\n        }\n      }\n      return new exp.OAuthProvider(providerId).credential({\n        idToken: oauthIdToken,\n        accessToken: oauthAccessToken,\n        rawNonce: nonce\n      });\n  }\n\n  return object instanceof FirebaseError\n    ? provider.credentialFromError(object)\n    : provider.credentialFromResult(object);\n}\n\nexport function convertCredential(\n  auth: exp.Auth,\n  credentialPromise: Promise<exp.UserCredential>\n): Promise<compat.UserCredential> {\n  return credentialPromise\n    .catch(e => {\n      if (e instanceof FirebaseError) {\n        attachExtraErrorFields(auth, e);\n      }\n      throw e;\n    })\n    .then(credential => {\n      const operationType = credential.operationType;\n      const user = credential.user;\n\n      return {\n        operationType,\n        credential: credentialFromResponse(\n          credential as exp.UserCredentialInternal\n        ),\n        additionalUserInfo: exp.getAdditionalUserInfo(\n          credential as exp.UserCredential\n        ),\n        user: User.getOrCreate(user)\n      };\n    });\n}\n\nexport async function convertConfirmationResult(\n  auth: exp.Auth,\n  confirmationResultPromise: Promise<exp.ConfirmationResult>\n): Promise<compat.ConfirmationResult> {\n  const confirmationResultExp = await confirmationResultPromise;\n  return {\n    verificationId: confirmationResultExp.verificationId,\n    confirm: (verificationCode: string) =>\n      convertCredential(auth, confirmationResultExp.confirm(verificationCode))\n  };\n}\n\nclass MultiFactorResolver implements compat.MultiFactorResolver {\n  readonly auth: Auth;\n  constructor(\n    auth: exp.Auth,\n    private readonly resolver: exp.MultiFactorResolver\n  ) {\n    this.auth = wrapped(auth);\n  }\n\n  get session(): compat.MultiFactorSession {\n    return this.resolver.session;\n  }\n\n  get hints(): compat.MultiFactorInfo[] {\n    return this.resolver.hints;\n  }\n\n  resolveSignIn(\n    assertion: compat.MultiFactorAssertion\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      unwrap(this.auth),\n      this.resolver.resolveSignIn(assertion as exp.MultiFactorAssertion)\n    );\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Compat } from '@firebase/util';\nimport { _savePersistenceForRedirect } from './persistence';\nimport { CompatPopupRedirectResolver } from './popup_redirect';\nimport {\n  convertConfirmationResult,\n  convertCredential\n} from './user_credential';\n\nexport class User implements compat.User, Compat<exp.User> {\n  // Maintain a map so that there's always a 1:1 mapping between new User and\n  // legacy compat users\n  private static readonly USER_MAP = new WeakMap<exp.User, User>();\n\n  readonly multiFactor: compat.MultiFactorUser;\n\n  private constructor(readonly _delegate: exp.User) {\n    this.multiFactor = exp.multiFactor(_delegate);\n  }\n\n  static getOrCreate(user: exp.User): User {\n    if (!User.USER_MAP.has(user)) {\n      User.USER_MAP.set(user, new User(user));\n    }\n\n    return User.USER_MAP.get(user)!;\n  }\n\n  delete(): Promise<void> {\n    return this._delegate.delete();\n  }\n  reload(): Promise<void> {\n    return this._delegate.reload();\n  }\n  toJSON(): object {\n    return this._delegate.toJSON();\n  }\n  getIdTokenResult(forceRefresh?: boolean): Promise<compat.IdTokenResult> {\n    return this._delegate.getIdTokenResult(forceRefresh);\n  }\n  getIdToken(forceRefresh?: boolean): Promise<string> {\n    return this._delegate.getIdToken(forceRefresh);\n  }\n  linkAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.linkWithCredential(credential);\n  }\n  async linkWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.linkWithCredential(this._delegate, credential as exp.AuthCredential)\n    );\n  }\n  async linkWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this.auth,\n      exp.linkWithPhoneNumber(this._delegate, phoneNumber, applicationVerifier)\n    );\n  }\n  async linkWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.linkWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async linkWithRedirect(provider: compat.AuthProvider): Promise<void> {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.linkWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  reauthenticateAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.reauthenticateWithCredential(credential);\n  }\n  async reauthenticateWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth as unknown as exp.Auth,\n      exp.reauthenticateWithCredential(\n        this._delegate,\n        credential as exp.AuthCredential\n      )\n    );\n  }\n  reauthenticateWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this.auth,\n      exp.reauthenticateWithPhoneNumber(\n        this._delegate,\n        phoneNumber,\n        applicationVerifier\n      )\n    );\n  }\n  reauthenticateWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this.auth,\n      exp.reauthenticateWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async reauthenticateWithRedirect(\n    provider: compat.AuthProvider\n  ): Promise<void> {\n    await _savePersistenceForRedirect(exp._castAuth(this.auth));\n    return exp.reauthenticateWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  sendEmailVerification(\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.sendEmailVerification(this._delegate, actionCodeSettings);\n  }\n  async unlink(providerId: string): Promise<compat.User> {\n    await exp.unlink(this._delegate, providerId);\n    return this;\n  }\n  updateEmail(newEmail: string): Promise<void> {\n    return exp.updateEmail(this._delegate, newEmail);\n  }\n  updatePassword(newPassword: string): Promise<void> {\n    return exp.updatePassword(this._delegate, newPassword);\n  }\n  updatePhoneNumber(phoneCredential: compat.AuthCredential): Promise<void> {\n    return exp.updatePhoneNumber(\n      this._delegate,\n      phoneCredential as exp.PhoneAuthCredential\n    );\n  }\n  updateProfile(profile: {\n    displayName?: string | null;\n    photoURL?: string | null;\n  }): Promise<void> {\n    return exp.updateProfile(this._delegate, profile);\n  }\n  verifyBeforeUpdateEmail(\n    newEmail: string,\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.verifyBeforeUpdateEmail(\n      this._delegate,\n      newEmail,\n      actionCodeSettings\n    );\n  }\n  get emailVerified(): boolean {\n    return this._delegate.emailVerified;\n  }\n  get isAnonymous(): boolean {\n    return this._delegate.isAnonymous;\n  }\n  get metadata(): compat.UserMetadata {\n    return this._delegate.metadata;\n  }\n  get phoneNumber(): string | null {\n    return this._delegate.phoneNumber;\n  }\n  get providerData(): Array<compat.UserInfo | null> {\n    return this._delegate.providerData;\n  }\n  get refreshToken(): string {\n    return this._delegate.refreshToken;\n  }\n  get tenantId(): string | null {\n    return this._delegate.tenantId;\n  }\n  get displayName(): string | null {\n    return this._delegate.displayName;\n  }\n  get email(): string | null {\n    return this._delegate.email;\n  }\n  get photoURL(): string | null {\n    return this._delegate.photoURL;\n  }\n  get providerId(): string {\n    return this._delegate.providerId;\n  }\n  get uid(): string {\n    return this._delegate.uid;\n  }\n  private get auth(): exp.Auth {\n    return (this._delegate as exp.UserImpl).auth as unknown as exp.Auth;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { FirebaseApp, _FirebaseService } from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Provider } from '@firebase/component';\nimport { ErrorFn, Observer, Unsubscribe } from '@firebase/util';\n\nimport {\n  _validatePersistenceArgument,\n  Persistence,\n  _getPersistencesFromRedirect,\n  _savePersistenceForRedirect\n} from './persistence';\nimport { _isPopupRedirectSupported } from './platform';\nimport { CompatPopupRedirectResolver } from './popup_redirect';\nimport { User } from './user';\nimport {\n  convertConfirmationResult,\n  convertCredential\n} from './user_credential';\nimport { ReverseWrapper, Wrapper } from './wrap';\n\nconst _assert: typeof exp._assert = exp._assert;\n\nexport class Auth\n  implements compat.FirebaseAuth, Wrapper<exp.Auth>, _FirebaseService\n{\n  static Persistence = Persistence;\n  readonly _delegate: exp.AuthImpl;\n\n  constructor(readonly app: FirebaseApp, provider: Provider<'auth'>) {\n    if (provider.isInitialized()) {\n      this._delegate = provider.getImmediate() as exp.AuthImpl;\n      this.linkUnderlyingAuth();\n      return;\n    }\n\n    const { apiKey } = app.options;\n    // TODO: platform needs to be determined using heuristics\n    _assert(apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n\n    // TODO: platform needs to be determined using heuristics\n    _assert(apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n\n    // Only use a popup/redirect resolver in browser environments\n    const resolver =\n      typeof window !== 'undefined' ? CompatPopupRedirectResolver : undefined;\n    this._delegate = provider.initialize({\n      options: {\n        persistence: buildPersistenceHierarchy(apiKey, app.name),\n        popupRedirectResolver: resolver\n      }\n    }) as exp.AuthImpl;\n\n    this._delegate._updateErrorMap(exp.debugErrorMap);\n    this.linkUnderlyingAuth();\n  }\n\n  get emulatorConfig(): compat.EmulatorConfig | null {\n    return this._delegate.emulatorConfig;\n  }\n\n  get currentUser(): compat.User | null {\n    if (!this._delegate.currentUser) {\n      return null;\n    }\n\n    return User.getOrCreate(this._delegate.currentUser);\n  }\n  get languageCode(): string | null {\n    return this._delegate.languageCode;\n  }\n  set languageCode(languageCode: string | null) {\n    this._delegate.languageCode = languageCode;\n  }\n  get settings(): compat.AuthSettings {\n    return this._delegate.settings;\n  }\n  get tenantId(): string | null {\n    return this._delegate.tenantId;\n  }\n  set tenantId(tid: string | null) {\n    this._delegate.tenantId = tid;\n  }\n  useDeviceLanguage(): void {\n    this._delegate.useDeviceLanguage();\n  }\n  signOut(): Promise<void> {\n    return this._delegate.signOut();\n  }\n  useEmulator(url: string, options?: { disableWarnings: boolean }): void {\n    exp.connectAuthEmulator(this._delegate, url, options);\n  }\n  applyActionCode(code: string): Promise<void> {\n    return exp.applyActionCode(this._delegate, code);\n  }\n\n  checkActionCode(code: string): Promise<compat.ActionCodeInfo> {\n    return exp.checkActionCode(this._delegate, code);\n  }\n\n  confirmPasswordReset(code: string, newPassword: string): Promise<void> {\n    return exp.confirmPasswordReset(this._delegate, code, newPassword);\n  }\n\n  async createUserWithEmailAndPassword(\n    email: string,\n    password: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.createUserWithEmailAndPassword(this._delegate, email, password)\n    );\n  }\n  fetchProvidersForEmail(email: string): Promise<string[]> {\n    return this.fetchSignInMethodsForEmail(email);\n  }\n  fetchSignInMethodsForEmail(email: string): Promise<string[]> {\n    return exp.fetchSignInMethodsForEmail(this._delegate, email);\n  }\n  isSignInWithEmailLink(emailLink: string): boolean {\n    return exp.isSignInWithEmailLink(this._delegate, emailLink);\n  }\n  async getRedirectResult(): Promise<compat.UserCredential> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n    const credential = await exp.getRedirectResult(\n      this._delegate,\n      CompatPopupRedirectResolver\n    );\n    if (!credential) {\n      return {\n        credential: null,\n        user: null\n      };\n    }\n    return convertCredential(this._delegate, Promise.resolve(credential));\n  }\n\n  // This function should only be called by frameworks (e.g. FirebaseUI-web) to log their usage.\n  // It is not intended for direct use by developer apps. NO jsdoc here to intentionally leave it\n  // out of autogenerated documentation pages to reduce accidental misuse.\n  addFrameworkForLogging(framework: string): void {\n    exp.addFrameworkForLogging(this._delegate, framework);\n  }\n\n  onAuthStateChanged(\n    nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n    errorFn?: (error: compat.Error) => unknown,\n    completed?: Unsubscribe\n  ): Unsubscribe {\n    const { next, error, complete } = wrapObservers(\n      nextOrObserver,\n      errorFn,\n      completed\n    );\n    return this._delegate.onAuthStateChanged(next!, error, complete);\n  }\n  onIdTokenChanged(\n    nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n    errorFn?: (error: compat.Error) => unknown,\n    completed?: Unsubscribe\n  ): Unsubscribe {\n    const { next, error, complete } = wrapObservers(\n      nextOrObserver,\n      errorFn,\n      completed\n    );\n    return this._delegate.onIdTokenChanged(next!, error, complete);\n  }\n  sendSignInLinkToEmail(\n    email: string,\n    actionCodeSettings: compat.ActionCodeSettings\n  ): Promise<void> {\n    return exp.sendSignInLinkToEmail(this._delegate, email, actionCodeSettings);\n  }\n  sendPasswordResetEmail(\n    email: string,\n    actionCodeSettings?: compat.ActionCodeSettings | null\n  ): Promise<void> {\n    return exp.sendPasswordResetEmail(\n      this._delegate,\n      email,\n      actionCodeSettings || undefined\n    );\n  }\n  async setPersistence(persistence: string): Promise<void> {\n    _validatePersistenceArgument(this._delegate, persistence);\n    let converted;\n    switch (persistence) {\n      case Persistence.SESSION:\n        converted = exp.browserSessionPersistence;\n        break;\n      case Persistence.LOCAL:\n        // Not using isIndexedDBAvailable() since it only checks if indexedDB is defined.\n        const isIndexedDBFullySupported = await exp\n          ._getInstance<exp.PersistenceInternal>(exp.indexedDBLocalPersistence)\n          ._isAvailable();\n        converted = isIndexedDBFullySupported\n          ? exp.indexedDBLocalPersistence\n          : exp.browserLocalPersistence;\n        break;\n      case Persistence.NONE:\n        converted = exp.inMemoryPersistence;\n        break;\n      default:\n        return exp._fail(exp.AuthErrorCode.ARGUMENT_ERROR, {\n          appName: this._delegate.name\n        });\n    }\n\n    return this._delegate.setPersistence(converted);\n  }\n\n  signInAndRetrieveDataWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return this.signInWithCredential(credential);\n  }\n  signInAnonymously(): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInAnonymously(this._delegate)\n    );\n  }\n  signInWithCredential(\n    credential: compat.AuthCredential\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithCredential(this._delegate, credential as exp.AuthCredential)\n    );\n  }\n  signInWithCustomToken(token: string): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithCustomToken(this._delegate, token)\n    );\n  }\n  signInWithEmailAndPassword(\n    email: string,\n    password: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithEmailAndPassword(this._delegate, email, password)\n    );\n  }\n  signInWithEmailLink(\n    email: string,\n    emailLink?: string\n  ): Promise<compat.UserCredential> {\n    return convertCredential(\n      this._delegate,\n      exp.signInWithEmailLink(this._delegate, email, emailLink)\n    );\n  }\n  signInWithPhoneNumber(\n    phoneNumber: string,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<compat.ConfirmationResult> {\n    return convertConfirmationResult(\n      this._delegate,\n      exp.signInWithPhoneNumber(\n        this._delegate,\n        phoneNumber,\n        applicationVerifier\n      )\n    );\n  }\n  async signInWithPopup(\n    provider: compat.AuthProvider\n  ): Promise<compat.UserCredential> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n    return convertCredential(\n      this._delegate,\n      exp.signInWithPopup(\n        this._delegate,\n        provider as exp.AuthProvider,\n        CompatPopupRedirectResolver\n      )\n    );\n  }\n  async signInWithRedirect(provider: compat.AuthProvider): Promise<void> {\n    _assert(\n      _isPopupRedirectSupported(),\n      this._delegate,\n      exp.AuthErrorCode.OPERATION_NOT_SUPPORTED\n    );\n\n    await _savePersistenceForRedirect(this._delegate);\n    return exp.signInWithRedirect(\n      this._delegate,\n      provider as exp.AuthProvider,\n      CompatPopupRedirectResolver\n    );\n  }\n  updateCurrentUser(user: compat.User | null): Promise<void> {\n    // remove ts-ignore once overloads are defined for exp functions to accept compat objects\n    // @ts-ignore\n    return this._delegate.updateCurrentUser(user);\n  }\n  verifyPasswordResetCode(code: string): Promise<string> {\n    return exp.verifyPasswordResetCode(this._delegate, code);\n  }\n  unwrap(): exp.Auth {\n    return this._delegate;\n  }\n  _delete(): Promise<void> {\n    return this._delegate._delete();\n  }\n  private linkUnderlyingAuth(): void {\n    (this._delegate as unknown as ReverseWrapper<Auth>).wrapped = () => this;\n  }\n}\n\nfunction wrapObservers(\n  nextOrObserver: Observer<unknown> | ((a: compat.User | null) => unknown),\n  error?: (error: compat.Error) => unknown,\n  complete?: Unsubscribe\n): Partial<Observer<exp.User | null>> {\n  let next = nextOrObserver;\n  if (typeof nextOrObserver !== 'function') {\n    ({ next, error, complete } = nextOrObserver);\n  }\n\n  // We know 'next' is now a function\n  const oldNext = next as (a: compat.User | null) => unknown;\n\n  const newNext = (user: exp.User | null): unknown =>\n    oldNext(user && User.getOrCreate(user as exp.User));\n  return {\n    next: newNext,\n    error: error as ErrorFn,\n    complete\n  };\n}\n\nfunction buildPersistenceHierarchy(\n  apiKey: string,\n  appName: string\n): exp.Persistence[] {\n  // Note this is slightly different behavior: in this case, the stored\n  // persistence is checked *first* rather than last. This is because we want\n  // to prefer stored persistence type in the hierarchy. This is an empty\n  // array if window is not available or there is no pending redirect\n  const persistences = _getPersistencesFromRedirect(apiKey, appName);\n\n  // If \"self\" is available, add indexedDB\n  if (\n    typeof self !== 'undefined' &&\n    !persistences.includes(exp.indexedDBLocalPersistence)\n  ) {\n    persistences.push(exp.indexedDBLocalPersistence);\n  }\n\n  // If \"window\" is available, add HTML Storage persistences\n  if (typeof window !== 'undefined') {\n    for (const persistence of [\n      exp.browserLocalPersistence,\n      exp.browserSessionPersistence\n    ]) {\n      if (!persistences.includes(persistence)) {\n        persistences.push(persistence);\n      }\n    }\n  }\n\n  // Add in-memory as a final fallback\n  if (!persistences.includes(exp.inMemoryPersistence)) {\n    persistences.push(exp.inMemoryPersistence);\n  }\n\n  return persistences;\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport firebase from '@firebase/app-compat';\nimport { Compat } from '@firebase/util';\nimport { unwrap } from './wrap';\n\nexport class PhoneAuthProvider\n  implements compat.PhoneAuthProvider, Compat<exp.PhoneAuthProvider>\n{\n  providerId = 'phone';\n  readonly _delegate: exp.PhoneAuthProvider;\n\n  static PHONE_SIGN_IN_METHOD = exp.PhoneAuthProvider.PHONE_SIGN_IN_METHOD;\n  static PROVIDER_ID = exp.PhoneAuthProvider.PROVIDER_ID;\n\n  static credential(\n    verificationId: string,\n    verificationCode: string\n  ): compat.AuthCredential {\n    return exp.PhoneAuthProvider.credential(verificationId, verificationCode);\n  }\n\n  constructor() {\n    // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n    // @ts-ignore\n    this._delegate = new exp.PhoneAuthProvider(unwrap(firebase.auth!()));\n  }\n\n  verifyPhoneNumber(\n    phoneInfoOptions:\n      | string\n      | compat.PhoneSingleFactorInfoOptions\n      | compat.PhoneMultiFactorEnrollInfoOptions\n      | compat.PhoneMultiFactorSignInInfoOptions,\n    applicationVerifier: compat.ApplicationVerifier\n  ): Promise<string> {\n    return this._delegate.verifyPhoneNumber(\n      // The implementation matches but the types are subtly incompatible\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      phoneInfoOptions as any,\n      applicationVerifier\n    );\n  }\n\n  unwrap(): exp.PhoneAuthProvider {\n    return this._delegate;\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport firebase, { FirebaseApp } from '@firebase/app-compat';\nimport * as exp from '@firebase/auth/internal';\nimport * as compat from '@firebase/auth-types';\nimport { Compat } from '@firebase/util';\n\nconst _assert: typeof exp._assert = exp._assert;\n\nexport class RecaptchaVerifier\n  implements compat.RecaptchaVerifier, Compat<exp.ApplicationVerifier>\n{\n  readonly _delegate: exp.RecaptchaVerifier;\n  type: string;\n  constructor(\n    container: HTMLElement | string,\n    parameters?: object | null,\n    app: FirebaseApp = firebase.app()\n  ) {\n    // API key is required for web client RPC calls.\n    _assert(app.options?.apiKey, exp.AuthErrorCode.INVALID_API_KEY, {\n      appName: app.name\n    });\n    this._delegate = new exp.RecaptchaVerifier(\n      container,\n      // eslint-disable-next-line @typescript-eslint/no-explicit-any\n      parameters as any,\n\n      // TODO: remove ts-ignore when moving types from auth-types to auth-compat\n      // @ts-ignore\n      app.auth!()\n    );\n    this.type = this._delegate.type;\n  }\n  clear(): void {\n    this._delegate.clear();\n  }\n  render(): Promise<number> {\n    return this._delegate.render();\n  }\n  verify(): Promise<string> {\n    return this._delegate.verify();\n  }\n}\n","/**\n * @license\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\n/* eslint-disable camelcase */\n\nimport firebase, { _FirebaseNamespace } from '@firebase/app-compat';\nimport * as impl from '@firebase/auth/internal';\nimport {\n  Component,\n  ComponentType,\n  InstantiationMode\n} from '@firebase/component';\nimport { FirebaseError } from '@firebase/util';\n\nimport * as types from '@firebase/auth-types';\nimport { name, version } from './package.json';\nimport { Auth } from './src/auth';\nimport { PhoneAuthProvider as CompatAuthProvider } from './src/phone_auth_provider';\nimport { RecaptchaVerifier as CompatRecaptchaVerifier } from './src/recaptcha_verifier';\n\nconst AUTH_TYPE = 'auth-compat';\n\ndeclare module '@firebase/component' {\n  interface NameServiceMapping {\n    'auth-compat': types.FirebaseAuth;\n  }\n}\n\ndeclare module '@firebase/app-compat' {\n  interface FirebaseNamespace {\n    auth: {\n      (app?: FirebaseApp): types.FirebaseAuth;\n      Auth: typeof types.FirebaseAuth;\n      EmailAuthProvider: typeof types.EmailAuthProvider;\n      EmailAuthProvider_Instance: typeof types.EmailAuthProvider_Instance;\n      FacebookAuthProvider: typeof types.FacebookAuthProvider;\n      FacebookAuthProvider_Instance: typeof types.FacebookAuthProvider_Instance;\n      GithubAuthProvider: typeof types.GithubAuthProvider;\n      GithubAuthProvider_Instance: typeof types.GithubAuthProvider_Instance;\n      GoogleAuthProvider: typeof types.GoogleAuthProvider;\n      GoogleAuthProvider_Instance: typeof types.GoogleAuthProvider_Instance;\n      OAuthProvider: typeof types.OAuthProvider;\n      SAMLAuthProvider: typeof types.SAMLAuthProvider;\n      PhoneAuthProvider: typeof types.PhoneAuthProvider;\n      PhoneAuthProvider_Instance: typeof types.PhoneAuthProvider_Instance;\n      PhoneMultiFactorGenerator: typeof types.PhoneMultiFactorGenerator;\n      RecaptchaVerifier: typeof types.RecaptchaVerifier;\n      RecaptchaVerifier_Instance: typeof types.RecaptchaVerifier_Instance;\n      TwitterAuthProvider: typeof types.TwitterAuthProvider;\n      TwitterAuthProvider_Instance: typeof types.TwitterAuthProvider_Instance;\n    };\n  }\n  interface FirebaseApp {\n    auth?(): types.FirebaseAuth;\n  }\n}\n\n// Create auth components to register with firebase.\n// Provides Auth public APIs.\nfunction registerAuthCompat(instance: _FirebaseNamespace): void {\n  instance.INTERNAL.registerComponent(\n    new Component(\n      AUTH_TYPE,\n      container => {\n        // getImmediate for FirebaseApp will always succeed\n        const app = container.getProvider('app-compat').getImmediate();\n        const authProvider = container.getProvider('auth');\n        return new Auth(app, authProvider);\n      },\n      ComponentType.PUBLIC\n    )\n      .setServiceProps({\n        ActionCodeInfo: {\n          Operation: {\n            EMAIL_SIGNIN: impl.ActionCodeOperation.EMAIL_SIGNIN,\n            PASSWORD_RESET: impl.ActionCodeOperation.PASSWORD_RESET,\n            RECOVER_EMAIL: impl.ActionCodeOperation.RECOVER_EMAIL,\n            REVERT_SECOND_FACTOR_ADDITION:\n              impl.ActionCodeOperation.REVERT_SECOND_FACTOR_ADDITION,\n            VERIFY_AND_CHANGE_EMAIL:\n              impl.ActionCodeOperation.VERIFY_AND_CHANGE_EMAIL,\n            VERIFY_EMAIL: impl.ActionCodeOperation.VERIFY_EMAIL\n          }\n        },\n        EmailAuthProvider: impl.EmailAuthProvider,\n        FacebookAuthProvider: impl.FacebookAuthProvider,\n        GithubAuthProvider: impl.GithubAuthProvider,\n        GoogleAuthProvider: impl.GoogleAuthProvider,\n        OAuthProvider: impl.OAuthProvider,\n        SAMLAuthProvider: impl.SAMLAuthProvider,\n        PhoneAuthProvider: CompatAuthProvider,\n        PhoneMultiFactorGenerator: impl.PhoneMultiFactorGenerator,\n        RecaptchaVerifier: CompatRecaptchaVerifier,\n        TwitterAuthProvider: impl.TwitterAuthProvider,\n        Auth,\n        AuthCredential: impl.AuthCredential,\n        Error: FirebaseError\n      })\n      .setInstantiationMode(InstantiationMode.LAZY)\n      .setMultipleInstances(false)\n  );\n\n  instance.registerVersion(name, version);\n}\n\nregisterAuthCompat(firebase as _FirebaseNamespace);\n"]},"metadata":{},"sourceType":"module"}