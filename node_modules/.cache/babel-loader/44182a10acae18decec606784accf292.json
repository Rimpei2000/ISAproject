{"ast":null,"code":"import contains from 'dom-helpers/contains';\nimport listen from 'dom-helpers/listen';\nimport ownerDocument from 'dom-helpers/ownerDocument';\nimport { useCallback, useEffect, useRef } from 'react';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport warning from 'warning';\n\nvar noop = function noop() {};\n\nfunction isLeftClickEvent(event) {\n  return event.button === 0;\n}\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\nexport var getRefTarget = function getRefTarget(ref) {\n  return ref && ('current' in ref ? ref.current : ref);\n};\nvar InitialTriggerEvents = {\n  click: 'mousedown',\n  mouseup: 'mousedown',\n  pointerup: 'pointerdown'\n};\n/**\r\n * The `useClickOutside` hook registers your callback on the document that fires\r\n * when a pointer event is registered outside of the provided ref or element.\r\n *\r\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\r\n * @param {function} onClickOutside\r\n * @param {object=}  options\r\n * @param {boolean=} options.disabled\r\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\r\n */\n\nfunction useClickOutside(ref) {\n  var onClickOutside = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : noop;\n\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n      disabled = _ref.disabled,\n      _ref$clickTrigger = _ref.clickTrigger,\n      clickTrigger = _ref$clickTrigger === void 0 ? 'click' : _ref$clickTrigger;\n\n  var preventMouseClickOutsideRef = useRef(false);\n  var waitingForTrigger = useRef(false);\n  var handleMouseCapture = useCallback(function (e) {\n    var currentTarget = getRefTarget(ref);\n    warning(!!currentTarget, 'ClickOutside captured a close event but does not have a ref to compare it to. ' + 'useClickOutside(), should be passed a ref that resolves to a DOM node');\n    preventMouseClickOutsideRef.current = !currentTarget || isModifiedEvent(e) || !isLeftClickEvent(e) || !!contains(currentTarget, e.target) || waitingForTrigger.current;\n    waitingForTrigger.current = false;\n  }, [ref]);\n  var handleInitialMouse = useEventCallback(function (e) {\n    var currentTarget = getRefTarget(ref);\n\n    if (currentTarget && contains(currentTarget, e.target)) {\n      waitingForTrigger.current = true;\n    }\n  });\n  var handleMouse = useEventCallback(function (e) {\n    if (!preventMouseClickOutsideRef.current) {\n      onClickOutside(e);\n    }\n  });\n  useEffect(function () {\n    if (disabled || ref == null) return undefined;\n    var doc = ownerDocument(getRefTarget(ref)); // Store the current event to avoid triggering handlers immediately\n    // https://github.com/facebook/react/issues/20074\n\n    var currentEvent = (doc.defaultView || window).event;\n    var removeInitialTriggerListener = null;\n\n    if (InitialTriggerEvents[clickTrigger]) {\n      removeInitialTriggerListener = listen(doc, InitialTriggerEvents[clickTrigger], handleInitialMouse, true);\n    } // Use capture for this listener so it fires before React's listener, to\n    // avoid false positives in the contains() check below if the target DOM\n    // element is removed in the React mouse callback.\n\n\n    var removeMouseCaptureListener = listen(doc, clickTrigger, handleMouseCapture, true);\n    var removeMouseListener = listen(doc, clickTrigger, function (e) {\n      // skip if this event is the same as the one running when we added the handlers\n      if (e === currentEvent) {\n        currentEvent = undefined;\n        return;\n      }\n\n      handleMouse(e);\n    });\n    var mobileSafariHackListeners = [];\n\n    if ('ontouchstart' in doc.documentElement) {\n      mobileSafariHackListeners = [].slice.call(doc.body.children).map(function (el) {\n        return listen(el, 'mousemove', noop);\n      });\n    }\n\n    return function () {\n      removeInitialTriggerListener == null ? void 0 : removeInitialTriggerListener();\n      removeMouseCaptureListener();\n      removeMouseListener();\n      mobileSafariHackListeners.forEach(function (remove) {\n        return remove();\n      });\n    };\n  }, [ref, disabled, clickTrigger, handleMouseCapture, handleInitialMouse, handleMouse]);\n}\n\nexport default useClickOutside;","map":{"version":3,"sources":["C:/Users/bhupe/Downloads/Term 4/COMP4537/MilestoneFinal/ISAproject/node_modules/@restart/ui/esm/useClickOutside.js"],"names":["contains","listen","ownerDocument","useCallback","useEffect","useRef","useEventCallback","warning","noop","isLeftClickEvent","event","button","isModifiedEvent","metaKey","altKey","ctrlKey","shiftKey","getRefTarget","ref","current","InitialTriggerEvents","click","mouseup","pointerup","useClickOutside","onClickOutside","disabled","clickTrigger","preventMouseClickOutsideRef","waitingForTrigger","handleMouseCapture","e","currentTarget","target","handleInitialMouse","handleMouse","undefined","doc","currentEvent","defaultView","window","removeInitialTriggerListener","removeMouseCaptureListener","removeMouseListener","mobileSafariHackListeners","documentElement","slice","call","body","children","map","el","forEach","remove"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,sBAArB;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,aAAP,MAA0B,2BAA1B;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,MAAjC,QAA+C,OAA/C;AACA,OAAOC,gBAAP,MAA6B,iCAA7B;AACA,OAAOC,OAAP,MAAoB,SAApB;;AAEA,IAAMC,IAAI,GAAG,SAAPA,IAAO,GAAM,CAAE,CAArB;;AAEA,SAASC,gBAAT,CAA0BC,KAA1B,EAAiC;AAC/B,SAAOA,KAAK,CAACC,MAAN,KAAiB,CAAxB;AACD;;AAED,SAASC,eAAT,CAAyBF,KAAzB,EAAgC;AAC9B,SAAO,CAAC,EAAEA,KAAK,CAACG,OAAN,IAAiBH,KAAK,CAACI,MAAvB,IAAiCJ,KAAK,CAACK,OAAvC,IAAkDL,KAAK,CAACM,QAA1D,CAAR;AACD;;AAED,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAAC,GAAG;AAAA,SAAIA,GAAG,KAAK,aAAaA,GAAb,GAAmBA,GAAG,CAACC,OAAvB,GAAiCD,GAAtC,CAAP;AAAA,CAAxB;AACP,IAAME,oBAAoB,GAAG;AAC3BC,EAAAA,KAAK,EAAE,WADoB;AAE3BC,EAAAA,OAAO,EAAE,WAFkB;AAG3BC,EAAAA,SAAS,EAAE;AAHgB,CAA7B;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAASC,eAAT,CAAyBN,GAAzB,EAGQ;AAAA,MAHsBO,cAGtB,uEAHuCjB,IAGvC;;AAAA,iFAAJ,EAAI;AAAA,MAFNkB,QAEM,QAFNA,QAEM;AAAA,+BADNC,YACM;AAAA,MADNA,YACM,kCADS,OACT;;AACN,MAAMC,2BAA2B,GAAGvB,MAAM,CAAC,KAAD,CAA1C;AACA,MAAMwB,iBAAiB,GAAGxB,MAAM,CAAC,KAAD,CAAhC;AACA,MAAMyB,kBAAkB,GAAG3B,WAAW,CAAC,UAAA4B,CAAC,EAAI;AAC1C,QAAMC,aAAa,GAAGf,YAAY,CAACC,GAAD,CAAlC;AACAX,IAAAA,OAAO,CAAC,CAAC,CAACyB,aAAH,EAAkB,mFAAmF,uEAArG,CAAP;AACAJ,IAAAA,2BAA2B,CAACT,OAA5B,GAAsC,CAACa,aAAD,IAAkBpB,eAAe,CAACmB,CAAD,CAAjC,IAAwC,CAACtB,gBAAgB,CAACsB,CAAD,CAAzD,IAAgE,CAAC,CAAC/B,QAAQ,CAACgC,aAAD,EAAgBD,CAAC,CAACE,MAAlB,CAA1E,IAAuGJ,iBAAiB,CAACV,OAA/J;AACAU,IAAAA,iBAAiB,CAACV,OAAlB,GAA4B,KAA5B;AACD,GALqC,EAKnC,CAACD,GAAD,CALmC,CAAtC;AAMA,MAAMgB,kBAAkB,GAAG5B,gBAAgB,CAAC,UAAAyB,CAAC,EAAI;AAC/C,QAAMC,aAAa,GAAGf,YAAY,CAACC,GAAD,CAAlC;;AAEA,QAAIc,aAAa,IAAIhC,QAAQ,CAACgC,aAAD,EAAgBD,CAAC,CAACE,MAAlB,CAA7B,EAAwD;AACtDJ,MAAAA,iBAAiB,CAACV,OAAlB,GAA4B,IAA5B;AACD;AACF,GAN0C,CAA3C;AAOA,MAAMgB,WAAW,GAAG7B,gBAAgB,CAAC,UAAAyB,CAAC,EAAI;AACxC,QAAI,CAACH,2BAA2B,CAACT,OAAjC,EAA0C;AACxCM,MAAAA,cAAc,CAACM,CAAD,CAAd;AACD;AACF,GAJmC,CAApC;AAKA3B,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIsB,QAAQ,IAAIR,GAAG,IAAI,IAAvB,EAA6B,OAAOkB,SAAP;AAC7B,QAAMC,GAAG,GAAGnC,aAAa,CAACe,YAAY,CAACC,GAAD,CAAb,CAAzB,CAFc,CAEgC;AAC9C;;AAEA,QAAIoB,YAAY,GAAG,CAACD,GAAG,CAACE,WAAJ,IAAmBC,MAApB,EAA4B9B,KAA/C;AACA,QAAI+B,4BAA4B,GAAG,IAAnC;;AAEA,QAAIrB,oBAAoB,CAACO,YAAD,CAAxB,EAAwC;AACtCc,MAAAA,4BAA4B,GAAGxC,MAAM,CAACoC,GAAD,EAAMjB,oBAAoB,CAACO,YAAD,CAA1B,EAA0CO,kBAA1C,EAA8D,IAA9D,CAArC;AACD,KAVa,CAUZ;AACF;AACA;;;AAGA,QAAMQ,0BAA0B,GAAGzC,MAAM,CAACoC,GAAD,EAAMV,YAAN,EAAoBG,kBAApB,EAAwC,IAAxC,CAAzC;AACA,QAAMa,mBAAmB,GAAG1C,MAAM,CAACoC,GAAD,EAAMV,YAAN,EAAoB,UAAAI,CAAC,EAAI;AACzD;AACA,UAAIA,CAAC,KAAKO,YAAV,EAAwB;AACtBA,QAAAA,YAAY,GAAGF,SAAf;AACA;AACD;;AAEDD,MAAAA,WAAW,CAACJ,CAAD,CAAX;AACD,KARiC,CAAlC;AASA,QAAIa,yBAAyB,GAAG,EAAhC;;AAEA,QAAI,kBAAkBP,GAAG,CAACQ,eAA1B,EAA2C;AACzCD,MAAAA,yBAAyB,GAAG,GAAGE,KAAH,CAASC,IAAT,CAAcV,GAAG,CAACW,IAAJ,CAASC,QAAvB,EAAiCC,GAAjC,CAAqC,UAAAC,EAAE;AAAA,eAAIlD,MAAM,CAACkD,EAAD,EAAK,WAAL,EAAkB3C,IAAlB,CAAV;AAAA,OAAvC,CAA5B;AACD;;AAED,WAAO,YAAM;AACXiC,MAAAA,4BAA4B,IAAI,IAAhC,GAAuC,KAAK,CAA5C,GAAgDA,4BAA4B,EAA5E;AACAC,MAAAA,0BAA0B;AAC1BC,MAAAA,mBAAmB;AACnBC,MAAAA,yBAAyB,CAACQ,OAA1B,CAAkC,UAAAC,MAAM;AAAA,eAAIA,MAAM,EAAV;AAAA,OAAxC;AACD,KALD;AAMD,GArCQ,EAqCN,CAACnC,GAAD,EAAMQ,QAAN,EAAgBC,YAAhB,EAA8BG,kBAA9B,EAAkDI,kBAAlD,EAAsEC,WAAtE,CArCM,CAAT;AAsCD;;AAED,eAAeX,eAAf","sourcesContent":["import contains from 'dom-helpers/contains';\r\nimport listen from 'dom-helpers/listen';\r\nimport ownerDocument from 'dom-helpers/ownerDocument';\r\nimport { useCallback, useEffect, useRef } from 'react';\r\nimport useEventCallback from '@restart/hooks/useEventCallback';\r\nimport warning from 'warning';\r\n\r\nconst noop = () => {};\r\n\r\nfunction isLeftClickEvent(event) {\r\n  return event.button === 0;\r\n}\r\n\r\nfunction isModifiedEvent(event) {\r\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\r\n}\r\n\r\nexport const getRefTarget = ref => ref && ('current' in ref ? ref.current : ref);\r\nconst InitialTriggerEvents = {\r\n  click: 'mousedown',\r\n  mouseup: 'mousedown',\r\n  pointerup: 'pointerdown'\r\n};\r\n/**\r\n * The `useClickOutside` hook registers your callback on the document that fires\r\n * when a pointer event is registered outside of the provided ref or element.\r\n *\r\n * @param {Ref<HTMLElement>| HTMLElement} ref  The element boundary\r\n * @param {function} onClickOutside\r\n * @param {object=}  options\r\n * @param {boolean=} options.disabled\r\n * @param {string=}  options.clickTrigger The DOM event name (click, mousedown, etc) to attach listeners on\r\n */\r\n\r\nfunction useClickOutside(ref, onClickOutside = noop, {\r\n  disabled,\r\n  clickTrigger = 'click'\r\n} = {}) {\r\n  const preventMouseClickOutsideRef = useRef(false);\r\n  const waitingForTrigger = useRef(false);\r\n  const handleMouseCapture = useCallback(e => {\r\n    const currentTarget = getRefTarget(ref);\r\n    warning(!!currentTarget, 'ClickOutside captured a close event but does not have a ref to compare it to. ' + 'useClickOutside(), should be passed a ref that resolves to a DOM node');\r\n    preventMouseClickOutsideRef.current = !currentTarget || isModifiedEvent(e) || !isLeftClickEvent(e) || !!contains(currentTarget, e.target) || waitingForTrigger.current;\r\n    waitingForTrigger.current = false;\r\n  }, [ref]);\r\n  const handleInitialMouse = useEventCallback(e => {\r\n    const currentTarget = getRefTarget(ref);\r\n\r\n    if (currentTarget && contains(currentTarget, e.target)) {\r\n      waitingForTrigger.current = true;\r\n    }\r\n  });\r\n  const handleMouse = useEventCallback(e => {\r\n    if (!preventMouseClickOutsideRef.current) {\r\n      onClickOutside(e);\r\n    }\r\n  });\r\n  useEffect(() => {\r\n    if (disabled || ref == null) return undefined;\r\n    const doc = ownerDocument(getRefTarget(ref)); // Store the current event to avoid triggering handlers immediately\r\n    // https://github.com/facebook/react/issues/20074\r\n\r\n    let currentEvent = (doc.defaultView || window).event;\r\n    let removeInitialTriggerListener = null;\r\n\r\n    if (InitialTriggerEvents[clickTrigger]) {\r\n      removeInitialTriggerListener = listen(doc, InitialTriggerEvents[clickTrigger], handleInitialMouse, true);\r\n    } // Use capture for this listener so it fires before React's listener, to\r\n    // avoid false positives in the contains() check below if the target DOM\r\n    // element is removed in the React mouse callback.\r\n\r\n\r\n    const removeMouseCaptureListener = listen(doc, clickTrigger, handleMouseCapture, true);\r\n    const removeMouseListener = listen(doc, clickTrigger, e => {\r\n      // skip if this event is the same as the one running when we added the handlers\r\n      if (e === currentEvent) {\r\n        currentEvent = undefined;\r\n        return;\r\n      }\r\n\r\n      handleMouse(e);\r\n    });\r\n    let mobileSafariHackListeners = [];\r\n\r\n    if ('ontouchstart' in doc.documentElement) {\r\n      mobileSafariHackListeners = [].slice.call(doc.body.children).map(el => listen(el, 'mousemove', noop));\r\n    }\r\n\r\n    return () => {\r\n      removeInitialTriggerListener == null ? void 0 : removeInitialTriggerListener();\r\n      removeMouseCaptureListener();\r\n      removeMouseListener();\r\n      mobileSafariHackListeners.forEach(remove => remove());\r\n    };\r\n  }, [ref, disabled, clickTrigger, handleMouseCapture, handleInitialMouse, handleMouse]);\r\n}\r\n\r\nexport default useClickOutside;"]},"metadata":{},"sourceType":"module"}